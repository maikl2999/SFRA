/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./cartridges/app_mycustom_cartridge/cartridge/client/default/js/wishlist.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./cartridges/app_mycustom_cartridge/cartridge/client/default/js/wishlist.js":
/*!***********************************************************************************!*\
  !*** ./cartridges/app_mycustom_cartridge/cartridge/client/default/js/wishlist.js ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar processInclude = __webpack_require__(/*! base/util */ \"./cartridges/app_storefront_base/cartridge/client/default/js/util.js\");\n\n$(document).ready(function () {\n    processInclude(__webpack_require__(/*! ./wishlist/wishlist */ \"./cartridges/app_mycustom_cartridge/cartridge/client/default/js/wishlist/wishlist.js\"));\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jYXJ0cmlkZ2VzL2FwcF9teWN1c3RvbV9jYXJ0cmlkZ2UvY2FydHJpZGdlL2NsaWVudC9kZWZhdWx0L2pzL3dpc2hsaXN0LmpzP2EwZWQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIscUJBQXFCLG1CQUFPLENBQUMsdUZBQVc7O0FBRXhDO0FBQ0EsbUJBQW1CLG1CQUFPLENBQUMsaUhBQXFCO0FBQ2hELENBQUMiLCJmaWxlIjoiLi9jYXJ0cmlkZ2VzL2FwcF9teWN1c3RvbV9jYXJ0cmlkZ2UvY2FydHJpZGdlL2NsaWVudC9kZWZhdWx0L2pzL3dpc2hsaXN0LmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgcHJvY2Vzc0luY2x1ZGUgPSByZXF1aXJlKCdiYXNlL3V0aWwnKTtcblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgIHByb2Nlc3NJbmNsdWRlKHJlcXVpcmUoJy4vd2lzaGxpc3Qvd2lzaGxpc3QnKSk7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./cartridges/app_mycustom_cartridge/cartridge/client/default/js/wishlist.js\n");

/***/ }),

/***/ "./cartridges/app_mycustom_cartridge/cartridge/client/default/js/wishlist/wishlist.js":
/*!********************************************************************************************!*\
  !*** ./cartridges/app_mycustom_cartridge/cartridge/client/default/js/wishlist/wishlist.js ***!
  \********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar base = __webpack_require__(/*! base/product/base */ \"./cartridges/app_storefront_base/cartridge/client/default/js/product/base.js\");\nvar focusHelper = __webpack_require__(/*! base/components/focus */ \"./cartridges/app_storefront_base/cartridge/client/default/js/components/focus.js\");\n\n/**\n * Updates the Mini-Cart quantity value after the customer has pressed the \"Add to Cart\" button\n * @param {string} response - ajax response from clicking the add to cart button\n */\nfunction handlePostCartAdd(response) {\n    $('.minicart').trigger('count:update', response);\n    var messageType = response.error ? 'alert-danger' : 'alert-success';\n\n    if ($('.add-to-cart-messages').length === 0) {\n        $('body').append(\n            '<div class=\"add-to-cart-messages\"></div>'\n        );\n    }\n\n    $('.add-to-cart-messages').append(\n        '<div class=\"alert ' + messageType + ' add-to-basket-alert text-center\" role=\"alert\">'\n        + response.message\n        + '</div>'\n    );\n\n    setTimeout(function () {\n        $('.add-to-basket-alert').remove();\n    }, 5000);\n}\n\n/**\n * Generates the modal window on the first call.\n *\n */\nfunction getModalHtmlElement() {\n    if ($('#editProductModal').length !== 0) {\n        $('#editProductModal').remove();\n    }\n    var htmlString = '<!-- Modal -->'\n        + '<div class=\"modal fade\" id=\"editWishlistProductModal\" tabindex=\"-1\" role=\"dialog\">'\n        + '<span class=\"enter-message sr-only\" ></span>'\n        + '<div class=\"modal-dialog quick-view-dialog\">'\n        + '<!-- Modal content-->'\n        + '<div class=\"modal-content\">'\n        + '<div class=\"modal-header\">'\n        + '    <button type=\"button\" class=\"close pull-right\" data-dismiss=\"modal\">'\n        + '        <span aria-hidden=\"true\">&times;</span>'\n        + '        <span class=\"sr-only\"> </span>'\n        + '    </button>'\n        + '</div>'\n        + '<div class=\"modal-body\"></div>'\n        + '<div class=\"modal-footer\"></div>'\n        + '</div>'\n        + '</div>'\n        + '</div>';\n    $('body').append(htmlString);\n}\n\n/**\n * Parses the html for a modal window\n * @param {string} html - representing the body and footer of the modal window\n *\n * @return {Object} - Object with properties body and footer.\n */\nfunction parseHtml(html) {\n    var $html = $('<div>').append($.parseHTML(html));\n\n    var body = $html.find('.product-quickview');\n    var footer = $html.find('.modal-footer').children();\n\n    return { body: body, footer: footer };\n}\n\n/**\n * replaces the content in the modal window for product variation to be edited.\n * @param {string} editProductUrl - url to be used to retrieve a new product model\n */\nfunction fillModalElement(editProductUrl) {\n    $('#editWishlistProductModal').spinner().start();\n\n    $.ajax({\n        url: editProductUrl,\n        method: 'GET',\n        dataType: 'json',\n        success: function (data) {\n            var parsedHtml = parseHtml(data.renderedTemplate);\n\n            $('#editWishlistProductModal .modal-body').empty();\n            $('#editWishlistProductModal .modal-body').html(parsedHtml.body);\n            $('#editWishlistProductModal .modal-footer').html(parsedHtml.footer);\n            $('#editWishlistProductModal .modal-header .close .sr-only').text(data.closeButtonText);\n            $('#editWishlistProductModal .enter-message').text(data.enterDialogMessage);\n            $('#editWishlistProductModal').modal('show');\n            $('body').trigger('editwishlistproduct:ready');\n            $.spinner().stop();\n        },\n        error: function () {\n            $('#editWishlistProductModal').spinner().stop();\n        }\n    });\n}\n\n/**\n * show toast response\n * @param {Object} res - from the call to set the public status of a list or item in a list\n */\nfunction showResponseMsg(res) {\n    $.spinner().stop();\n    var status;\n\n    if (res.success) {\n        status = 'alert-success';\n    } else {\n        status = 'alert-danger';\n    }\n\n    if ($('.add-to-wishlist-messages').length === 0) {\n        $('body').append(\n        '<div class=\"add-to-wishlist-messages \"></div>'\n        );\n    }\n\n    $('.add-to-wishlist-messages')\n        .append('<div class=\"add-to-wishlist-alert text-center ' + status + '\">' + res.msg + '</div>');\n\n    setTimeout(function () {\n        $('.add-to-wishlist-messages').remove();\n    }, 3000);\n}\n\n/**\n * toggles the public / private status of the item or wishlist item\n * @param {string} listID - the order model\n * @param {string} itemID - the customer model\n * @param {Object} callback - function to run if the ajax call returns with an\n *                        error so that the checkbox can be reset to it's original state\n */\nfunction updatePublicStatus(listID, itemID, callback) {\n    var url = $('#isPublicList').data('url');\n    $.spinner().start();\n    $.ajax({\n        url: url,\n        type: 'post',\n        dataType: 'json',\n        data: {\n            listID: listID,\n            itemID: itemID\n        },\n        success: function (data) {\n            if (callback && !data.success) { callback(); }\n            showResponseMsg(data, null);\n        },\n        error: function (err) {\n            if (callback) { callback(); }\n            showResponseMsg(err);\n        }\n    });\n}\n/**\n * @param {Object} $elementAppendTo - The element to append error html to\n * @param {string} msg - The error message\n * display error message if remove item from wishlist failed\n */\nfunction displayErrorMessage($elementAppendTo, msg) {\n    if ($('.remove-from-wishlist-messages').length === 0) {\n        $elementAppendTo.append(\n            '<div class=\"remove-from-wishlist-messages \"></div>'\n        );\n    }\n    $('.remove-from-wishlist-messages')\n        .append('<div class=\"remove-from-wishlist-alert text-center alert-danger\">' + msg + '</div>');\n\n    setTimeout(function () {\n        $('.remove-from-wishlist-messages').remove();\n    }, 3000);\n}\n\n/**\n * renders the list up to a given page number\n * @param {number} pageNumber - current page number\n * @param {boolean} spinner - if the spinner has already started\n * @param {string} focusElementSelector - selector of the element to focus on\n */\nfunction renderNewPageOfItems(pageNumber, spinner, focusElementSelector) {\n    var publicView = $('.wishlistItemCardsData').data('public-view');\n    var listUUID = $('.wishlistItemCardsData').data('uuid');\n    var url = $('.wishlistItemCardsData').data('href');\n    if (spinner) {\n        $.spinner().start();\n    }\n    var scrollPosition = document.documentElement.scrollTop;\n    var newPageNumber = pageNumber;\n    $.ajax({\n        url: url,\n        method: 'get',\n        data: {\n            pageNumber: ++newPageNumber,\n            publicView: publicView,\n            id: listUUID\n        }\n    }).done(function (data) {\n        $('.wishlistItemCards').empty();\n        $('body .wishlistItemCards').append(data);\n\n        if (focusElementSelector) {\n            $(focusElementSelector).focus();\n        } else {\n            document.documentElement.scrollTop = scrollPosition;\n        }\n    }).fail(function () {\n        $('.more-wl-items').remove();\n    });\n    $.spinner().stop();\n}\n\nmodule.exports = {\n    removeFromWishlist: function () {\n        $('body').on('click', '.remove-from-wishlist', function (e) {\n            e.preventDefault();\n            var url = $(this).data('url');\n            var elMyAccount = $('.account-wishlist-item').length;\n\n            // If user is in my account page, call removeWishlistAccount() end point, re-render wishlist cards\n            if (elMyAccount > 0) {\n                $('.wishlist-account-card').spinner().start();\n                $.ajax({\n                    url: url,\n                    type: 'get',\n                    dataType: 'html',\n                    data: {},\n                    success: function (html) {\n                        $('.wishlist-account-card>.card').remove();\n                        $('.wishlist-account-card').append(html);\n                        $('.wishlist-account-card').spinner().stop();\n                    },\n                    error: function () {\n                        var $elToAppend = $('.wishlist-account-card');\n                        $elToAppend.spinner().stop();\n                        var msg = $elToAppend.data('error-msg');\n                        displayErrorMessage($elToAppend, msg);\n                    }\n                });\n            // else user is in wishlist landing page, call removeProduct() end point, then remove this card\n            } else {\n                $.spinner().start();\n                $.ajax({\n                    url: url,\n                    type: 'get',\n                    dataType: 'json',\n                    data: {},\n                    success: function () {\n                        var pageNumber = $('.wishlistItemCardsData').data('page-number') - 1;\n                        renderNewPageOfItems(pageNumber, false);\n                    },\n                    error: function () {\n                        $.spinner().stop();\n                        var $elToAppendWL = $('.wishlistItemCards');\n                        var msg = $elToAppendWL.data('error-msg');\n                        displayErrorMessage($elToAppendWL, msg);\n                    }\n                });\n            }\n        });\n    },\n\n    viewProductViaEdit: function () {\n        $('body').on('click', '.edit-add-to-wishlist .edit', function (e) {\n            e.preventDefault();\n\n            var editProductUrl = $(this).attr('href');\n            $(e.target).trigger('editwishlistproduct:show');\n            getModalHtmlElement();\n            fillModalElement(editProductUrl);\n        });\n    },\n\n    viewProductViaSelectAttribute: function () {\n        $('body').on('click', '.select-attributes-btn', function (e) {\n            e.preventDefault();\n\n            var editProductUrl = $(this).data('get-product-url');\n            getModalHtmlElement();\n            fillModalElement(editProductUrl);\n        });\n    },\n\n    focusEditWishlistProductModal: function () {\n        $('body').on('shown.bs.modal', '#editWishlistProductModal', function () {\n            $('#editWishlistProductModal').siblings().attr('aria-hidden', 'true');\n            $('#editWishlistProductModal .close').focus();\n        });\n    },\n\n    onClosingEditWishlistProductModal: function () {\n        $('body').on('hidden.bs.modal', '#editWishlistProductModal', function () {\n            $('#editWishlistProductModal').remove();\n            $('.modal-backdrop').remove();\n            $('body').removeClass('modal-open');\n\n            $('#editWishlistProductModal').siblings().attr('aria-hidden', 'false');\n        });\n    },\n\n    trapEditWishlistProductModalFocus: function () {\n        $('body').on('keydown', '#editWishlistProductModal', function (e) {\n            var focusParams = {\n                event: e,\n                containerSelector: '#editWishlistProductModal',\n                firstElementSelector: '.close',\n                lastElementSelector: '.btn-update-wishlist-product',\n                nextToLastElementSelector: '.select-size'\n            };\n            focusHelper.setTabNextFocus(focusParams);\n        });\n    },\n\n    updateWishlistUpdateButton: function () {\n        $('body').on('product:updateAddToCart', function (e, response) {\n            response.$productContainer.find('.btn-update-wishlist-product').attr('disabled', !response.product.readyToOrder || !response.product.available);\n        });\n    },\n\n    updateWishListItem: function () {\n        $('body').on('click', '.btn-update-wishlist-product', function (e) {\n            e.preventDefault();\n\n            var updateButtonBlock = $(this).closest('.wishlist-item-update-button-block').find('.update-wishlist-url');\n            var updateProductUrl = updateButtonBlock.val();\n            var uuid = updateButtonBlock.data('uuid');\n\n            var form = {\n                uuid: uuid,\n                pid: base.getPidValue($(this))\n            };\n\n            $('#editWishlistProductModal').spinner().start();\n\n            $.ajax({\n                url: updateProductUrl,\n                type: 'post',\n                context: this,\n                data: form,\n                dataType: 'json',\n                success: function () {\n                    $.spinner().start();\n                    $('#editWishlistProductModal').spinner().stop();\n                    $('#editWishlistProductModal').remove();\n                    $('.modal-backdrop').remove();\n                    $('body').removeClass('modal-open');\n                    var pageNumber = $('.wishlistItemCardsData').data('page-number') - 1;\n                    renderNewPageOfItems(pageNumber, false, '.product-info .edit-add-to-wishlist .edit:first');\n                },\n                error: function () {\n                    var msg = $('.btn-update-wishlist-product').data('error-msg');\n\n                    $('#editWishlistProductModal').spinner().stop();\n                    $('#editWishlistProductModal').remove();\n                    $('.modal-backdrop').remove();\n                    $('body').removeClass('modal-open');\n\n                    if ($('.update-wishlist-messages').length === 0) {\n                        $('body').append(\n                            '<div class=\"update-wishlist-messages \"></div>'\n                        );\n                    }\n\n                    $('.update-wishlist-messages')\n                        .append('<div class=\"update-wishlist-alert text-center alert-danger\">' + msg + '</div>');\n\n                    setTimeout(function () {\n                        $('.update-wishlist-messages').remove();\n                    }, 5000);\n                }\n            });\n        });\n    },\n\n    toggleWishlistStatus: function () {\n        $('#isPublicList').on('click', function () {\n            var listID = $('#isPublicList').data('id');\n            updatePublicStatus(listID, null, null);\n        });\n    },\n\n    toggleWishlistItemStatus: function () {\n        $('body').on('click', '.wishlist-item-checkbox', function () {\n            var itemID = $(this).closest('.wishlist-hide').find('.custom-control-input').data('id');\n            var el = $(this).siblings('input');\n            var resetCheckBox = function () {\n                return el.prop('checked')\n                    ? el.prop('checked', false)\n                    : el.prop('checked', true);\n            };\n\n            updatePublicStatus(null, itemID, resetCheckBox);\n        });\n    },\n\n    addToCartFromWishlist: function () {\n        $('body').on('click', '.add-to-cart', function () {\n            var pid;\n            var addToCartUrl;\n            var pidsQty;\n\n            $('body').trigger('product:beforeAddToCart', this);\n\n            pid = $(this).data('pid');\n            addToCartUrl = $(this).data('url');\n            pidsQty = parseInt($(this).closest('.product-info').find('.quantity').val(), 10);\n\n            var form = {\n                pid: pid,\n                quantity: pidsQty\n            };\n\n            if ($(this).data('option')) {\n                form.options = JSON.stringify($(this).data('option'));\n            }\n\n            $(this).trigger('updateAddToCartFormData', form);\n            if (addToCartUrl) {\n                $.ajax({\n                    url: addToCartUrl,\n                    method: 'POST',\n                    data: form,\n                    success: function (data) {\n                        handlePostCartAdd(data);\n                        $('body').trigger('product:afterAddToCart', data);\n                        $.spinner().stop();\n                        base.miniCartReportingUrl(data.reportingURL, data.error);\n                    },\n                    error: function () {\n                        $.spinner().stop();\n                    }\n                });\n            }\n        });\n    },\n    moreWLItems: function () {\n        $('body').on('click', '.more-wl-items', function () {\n            var pageNumber = $('.wishlistItemCardsData').data('page-number');\n            renderNewPageOfItems(pageNumber, true);\n        });\n    },\n    copyWishlistLink: function () {\n        $('body').on('click', '.fa-link', function () {\n            var $temp = $('<input>');\n            $('body').append($temp);\n            $temp.val($('#shareUrl').val()).select();\n            document.execCommand('copy');\n            $temp.remove();\n            $('.copy-link-message').removeClass('d-none');\n            setTimeout(function () {\n                $('.copy-link-message').addClass('d-none');\n            }, 3000);\n        });\n    },\n    submitWishlistSearch: function () {\n        $('body').on('click', '#wishlist-search button', function (e) {\n            var firstName = $('#wishlist-search-first-name').val();\n            var lastName = $('#wishlist-search-last-name').val();\n            var email = $('#wishlist-search-email').val();\n\n            if ((!firstName && !lastName && !email)\n                || (firstName && !lastName && !email)\n                || (!firstName && lastName && !email)) {\n                e.preventDefault();\n                $('.wishlist-error-search div').addClass('alert alert-danger');\n                var errorText = $('.wishlist-error-search').data('error-msg');\n                $('.wishlist-error-search div').html(errorText);\n            }\n        });\n    },\n    moreWLSearchResults: function () {\n        $('body').on('click', '.more-wl-results', function () {\n            var firstName = $(this).data('search-fname');\n            var lastName = $(this).data('search-lname');\n            var pageNumber = $(this).data('page-number');\n            var uuids = [];\n            $('.wl-hit').each(function () {\n                uuids.push($(this).find('a').data('id'));\n            });\n            var url = $(this).data('url');\n            $.spinner().start();\n            $.ajax({\n                url: url,\n                method: 'POST',\n                data: {\n                    firstName: firstName,\n                    lastName: lastName,\n                    uuids: JSON.stringify(uuids),\n                    pageNumber: ++pageNumber\n                },\n                success: function (data) {\n                    if (data.results.changedList) {\n                        $('.wl-hits .wl-hit').remove();\n                    }\n                    $('#result-count').html(data.results.totalString);\n                    data.results.hits.forEach(function (hit) {\n                        var divString = '<div class=\"row wl-hit\">' +\n                            '<div class=\"text-left col-6\">' +\n                                hit.firstName + ' ' + hit.lastName +\n                            '</div>' +\n                            '<div class=\"text-right col-6\">' +\n                                '<a href=\"' + hit.url + '\" title=\"' + hit.urlTitle + '\" data-id=\"' + hit.id + '\">' +\n                                    hit.urlText +\n                                '</a>' +\n                            '</div>' +\n                            '</div>';\n                        $('.wl-hits').append(divString);\n                    });\n                    if (data.results.showMore) {\n                        $('.find-another-wl .more-wl-results').data('page-number', data.results.pageNumber);\n                    } else {\n                        $('.find-another-wl .more-wl-results').remove();\n                    }\n                    $.spinner().stop();\n                },\n                error: function () {\n                    $.spinner().stop();\n                }\n            });\n        });\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jYXJ0cmlkZ2VzL2FwcF9teWN1c3RvbV9jYXJ0cmlkZ2UvY2FydHJpZGdlL2NsaWVudC9kZWZhdWx0L2pzL3dpc2hsaXN0L3dpc2hsaXN0LmpzP2UxODEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsV0FBVyxtQkFBTyxDQUFDLHVHQUFtQjtBQUN0QyxrQkFBa0IsbUJBQU8sQ0FBQywrR0FBdUI7O0FBRWpEO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQ7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQjtBQUNBLFlBQVksT0FBTztBQUNuQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxZQUFZO0FBQ1o7O0FBRUE7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSw0Q0FBNEMsWUFBWTtBQUN4RDtBQUNBLFNBQVM7QUFDVDtBQUNBLDJCQUEyQixZQUFZO0FBQ3ZDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsUUFBUTtBQUNuQixXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxTQUFTO0FBQ1QsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsU0FBUztBQUNULEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1QsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVM7QUFDVCxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBIiwiZmlsZSI6Ii4vY2FydHJpZGdlcy9hcHBfbXljdXN0b21fY2FydHJpZGdlL2NhcnRyaWRnZS9jbGllbnQvZGVmYXVsdC9qcy93aXNobGlzdC93aXNobGlzdC5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIGJhc2UgPSByZXF1aXJlKCdiYXNlL3Byb2R1Y3QvYmFzZScpO1xudmFyIGZvY3VzSGVscGVyID0gcmVxdWlyZSgnYmFzZS9jb21wb25lbnRzL2ZvY3VzJyk7XG5cbi8qKlxuICogVXBkYXRlcyB0aGUgTWluaS1DYXJ0IHF1YW50aXR5IHZhbHVlIGFmdGVyIHRoZSBjdXN0b21lciBoYXMgcHJlc3NlZCB0aGUgXCJBZGQgdG8gQ2FydFwiIGJ1dHRvblxuICogQHBhcmFtIHtzdHJpbmd9IHJlc3BvbnNlIC0gYWpheCByZXNwb25zZSBmcm9tIGNsaWNraW5nIHRoZSBhZGQgdG8gY2FydCBidXR0b25cbiAqL1xuZnVuY3Rpb24gaGFuZGxlUG9zdENhcnRBZGQocmVzcG9uc2UpIHtcbiAgICAkKCcubWluaWNhcnQnKS50cmlnZ2VyKCdjb3VudDp1cGRhdGUnLCByZXNwb25zZSk7XG4gICAgdmFyIG1lc3NhZ2VUeXBlID0gcmVzcG9uc2UuZXJyb3IgPyAnYWxlcnQtZGFuZ2VyJyA6ICdhbGVydC1zdWNjZXNzJztcblxuICAgIGlmICgkKCcuYWRkLXRvLWNhcnQtbWVzc2FnZXMnKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgJCgnYm9keScpLmFwcGVuZChcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYWRkLXRvLWNhcnQtbWVzc2FnZXNcIj48L2Rpdj4nXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgJCgnLmFkZC10by1jYXJ0LW1lc3NhZ2VzJykuYXBwZW5kKFxuICAgICAgICAnPGRpdiBjbGFzcz1cImFsZXJ0ICcgKyBtZXNzYWdlVHlwZSArICcgYWRkLXRvLWJhc2tldC1hbGVydCB0ZXh0LWNlbnRlclwiIHJvbGU9XCJhbGVydFwiPidcbiAgICAgICAgKyByZXNwb25zZS5tZXNzYWdlXG4gICAgICAgICsgJzwvZGl2PidcbiAgICApO1xuXG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy5hZGQtdG8tYmFza2V0LWFsZXJ0JykucmVtb3ZlKCk7XG4gICAgfSwgNTAwMCk7XG59XG5cbi8qKlxuICogR2VuZXJhdGVzIHRoZSBtb2RhbCB3aW5kb3cgb24gdGhlIGZpcnN0IGNhbGwuXG4gKlxuICovXG5mdW5jdGlvbiBnZXRNb2RhbEh0bWxFbGVtZW50KCkge1xuICAgIGlmICgkKCcjZWRpdFByb2R1Y3RNb2RhbCcpLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAkKCcjZWRpdFByb2R1Y3RNb2RhbCcpLnJlbW92ZSgpO1xuICAgIH1cbiAgICB2YXIgaHRtbFN0cmluZyA9ICc8IS0tIE1vZGFsIC0tPidcbiAgICAgICAgKyAnPGRpdiBjbGFzcz1cIm1vZGFsIGZhZGVcIiBpZD1cImVkaXRXaXNobGlzdFByb2R1Y3RNb2RhbFwiIHRhYmluZGV4PVwiLTFcIiByb2xlPVwiZGlhbG9nXCI+J1xuICAgICAgICArICc8c3BhbiBjbGFzcz1cImVudGVyLW1lc3NhZ2Ugc3Itb25seVwiID48L3NwYW4+J1xuICAgICAgICArICc8ZGl2IGNsYXNzPVwibW9kYWwtZGlhbG9nIHF1aWNrLXZpZXctZGlhbG9nXCI+J1xuICAgICAgICArICc8IS0tIE1vZGFsIGNvbnRlbnQtLT4nXG4gICAgICAgICsgJzxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+J1xuICAgICAgICArICc8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+J1xuICAgICAgICArICcgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZSBwdWxsLXJpZ2h0XCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIj4nXG4gICAgICAgICsgJyAgICAgICAgPHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCI+JnRpbWVzOzwvc3Bhbj4nXG4gICAgICAgICsgJyAgICAgICAgPHNwYW4gY2xhc3M9XCJzci1vbmx5XCI+IDwvc3Bhbj4nXG4gICAgICAgICsgJyAgICA8L2J1dHRvbj4nXG4gICAgICAgICsgJzwvZGl2PidcbiAgICAgICAgKyAnPGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj48L2Rpdj4nXG4gICAgICAgICsgJzxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIj48L2Rpdj4nXG4gICAgICAgICsgJzwvZGl2PidcbiAgICAgICAgKyAnPC9kaXY+J1xuICAgICAgICArICc8L2Rpdj4nO1xuICAgICQoJ2JvZHknKS5hcHBlbmQoaHRtbFN0cmluZyk7XG59XG5cbi8qKlxuICogUGFyc2VzIHRoZSBodG1sIGZvciBhIG1vZGFsIHdpbmRvd1xuICogQHBhcmFtIHtzdHJpbmd9IGh0bWwgLSByZXByZXNlbnRpbmcgdGhlIGJvZHkgYW5kIGZvb3RlciBvZiB0aGUgbW9kYWwgd2luZG93XG4gKlxuICogQHJldHVybiB7T2JqZWN0fSAtIE9iamVjdCB3aXRoIHByb3BlcnRpZXMgYm9keSBhbmQgZm9vdGVyLlxuICovXG5mdW5jdGlvbiBwYXJzZUh0bWwoaHRtbCkge1xuICAgIHZhciAkaHRtbCA9ICQoJzxkaXY+JykuYXBwZW5kKCQucGFyc2VIVE1MKGh0bWwpKTtcblxuICAgIHZhciBib2R5ID0gJGh0bWwuZmluZCgnLnByb2R1Y3QtcXVpY2t2aWV3Jyk7XG4gICAgdmFyIGZvb3RlciA9ICRodG1sLmZpbmQoJy5tb2RhbC1mb290ZXInKS5jaGlsZHJlbigpO1xuXG4gICAgcmV0dXJuIHsgYm9keTogYm9keSwgZm9vdGVyOiBmb290ZXIgfTtcbn1cblxuLyoqXG4gKiByZXBsYWNlcyB0aGUgY29udGVudCBpbiB0aGUgbW9kYWwgd2luZG93IGZvciBwcm9kdWN0IHZhcmlhdGlvbiB0byBiZSBlZGl0ZWQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZWRpdFByb2R1Y3RVcmwgLSB1cmwgdG8gYmUgdXNlZCB0byByZXRyaWV2ZSBhIG5ldyBwcm9kdWN0IG1vZGVsXG4gKi9cbmZ1bmN0aW9uIGZpbGxNb2RhbEVsZW1lbnQoZWRpdFByb2R1Y3RVcmwpIHtcbiAgICAkKCcjZWRpdFdpc2hsaXN0UHJvZHVjdE1vZGFsJykuc3Bpbm5lcigpLnN0YXJ0KCk7XG5cbiAgICAkLmFqYXgoe1xuICAgICAgICB1cmw6IGVkaXRQcm9kdWN0VXJsLFxuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdmFyIHBhcnNlZEh0bWwgPSBwYXJzZUh0bWwoZGF0YS5yZW5kZXJlZFRlbXBsYXRlKTtcblxuICAgICAgICAgICAgJCgnI2VkaXRXaXNobGlzdFByb2R1Y3RNb2RhbCAubW9kYWwtYm9keScpLmVtcHR5KCk7XG4gICAgICAgICAgICAkKCcjZWRpdFdpc2hsaXN0UHJvZHVjdE1vZGFsIC5tb2RhbC1ib2R5JykuaHRtbChwYXJzZWRIdG1sLmJvZHkpO1xuICAgICAgICAgICAgJCgnI2VkaXRXaXNobGlzdFByb2R1Y3RNb2RhbCAubW9kYWwtZm9vdGVyJykuaHRtbChwYXJzZWRIdG1sLmZvb3Rlcik7XG4gICAgICAgICAgICAkKCcjZWRpdFdpc2hsaXN0UHJvZHVjdE1vZGFsIC5tb2RhbC1oZWFkZXIgLmNsb3NlIC5zci1vbmx5JykudGV4dChkYXRhLmNsb3NlQnV0dG9uVGV4dCk7XG4gICAgICAgICAgICAkKCcjZWRpdFdpc2hsaXN0UHJvZHVjdE1vZGFsIC5lbnRlci1tZXNzYWdlJykudGV4dChkYXRhLmVudGVyRGlhbG9nTWVzc2FnZSk7XG4gICAgICAgICAgICAkKCcjZWRpdFdpc2hsaXN0UHJvZHVjdE1vZGFsJykubW9kYWwoJ3Nob3cnKTtcbiAgICAgICAgICAgICQoJ2JvZHknKS50cmlnZ2VyKCdlZGl0d2lzaGxpc3Rwcm9kdWN0OnJlYWR5Jyk7XG4gICAgICAgICAgICAkLnNwaW5uZXIoKS5zdG9wKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKCcjZWRpdFdpc2hsaXN0UHJvZHVjdE1vZGFsJykuc3Bpbm5lcigpLnN0b3AoKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG4vKipcbiAqIHNob3cgdG9hc3QgcmVzcG9uc2VcbiAqIEBwYXJhbSB7T2JqZWN0fSByZXMgLSBmcm9tIHRoZSBjYWxsIHRvIHNldCB0aGUgcHVibGljIHN0YXR1cyBvZiBhIGxpc3Qgb3IgaXRlbSBpbiBhIGxpc3RcbiAqL1xuZnVuY3Rpb24gc2hvd1Jlc3BvbnNlTXNnKHJlcykge1xuICAgICQuc3Bpbm5lcigpLnN0b3AoKTtcbiAgICB2YXIgc3RhdHVzO1xuXG4gICAgaWYgKHJlcy5zdWNjZXNzKSB7XG4gICAgICAgIHN0YXR1cyA9ICdhbGVydC1zdWNjZXNzJztcbiAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0dXMgPSAnYWxlcnQtZGFuZ2VyJztcbiAgICB9XG5cbiAgICBpZiAoJCgnLmFkZC10by13aXNobGlzdC1tZXNzYWdlcycpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAkKCdib2R5JykuYXBwZW5kKFxuICAgICAgICAnPGRpdiBjbGFzcz1cImFkZC10by13aXNobGlzdC1tZXNzYWdlcyBcIj48L2Rpdj4nXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgJCgnLmFkZC10by13aXNobGlzdC1tZXNzYWdlcycpXG4gICAgICAgIC5hcHBlbmQoJzxkaXYgY2xhc3M9XCJhZGQtdG8td2lzaGxpc3QtYWxlcnQgdGV4dC1jZW50ZXIgJyArIHN0YXR1cyArICdcIj4nICsgcmVzLm1zZyArICc8L2Rpdj4nKTtcblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcuYWRkLXRvLXdpc2hsaXN0LW1lc3NhZ2VzJykucmVtb3ZlKCk7XG4gICAgfSwgMzAwMCk7XG59XG5cbi8qKlxuICogdG9nZ2xlcyB0aGUgcHVibGljIC8gcHJpdmF0ZSBzdGF0dXMgb2YgdGhlIGl0ZW0gb3Igd2lzaGxpc3QgaXRlbVxuICogQHBhcmFtIHtzdHJpbmd9IGxpc3RJRCAtIHRoZSBvcmRlciBtb2RlbFxuICogQHBhcmFtIHtzdHJpbmd9IGl0ZW1JRCAtIHRoZSBjdXN0b21lciBtb2RlbFxuICogQHBhcmFtIHtPYmplY3R9IGNhbGxiYWNrIC0gZnVuY3Rpb24gdG8gcnVuIGlmIHRoZSBhamF4IGNhbGwgcmV0dXJucyB3aXRoIGFuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yIHNvIHRoYXQgdGhlIGNoZWNrYm94IGNhbiBiZSByZXNldCB0byBpdCdzIG9yaWdpbmFsIHN0YXRlXG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZVB1YmxpY1N0YXR1cyhsaXN0SUQsIGl0ZW1JRCwgY2FsbGJhY2spIHtcbiAgICB2YXIgdXJsID0gJCgnI2lzUHVibGljTGlzdCcpLmRhdGEoJ3VybCcpO1xuICAgICQuc3Bpbm5lcigpLnN0YXJ0KCk7XG4gICAgJC5hamF4KHtcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIHR5cGU6ICdwb3N0JyxcbiAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgbGlzdElEOiBsaXN0SUQsXG4gICAgICAgICAgICBpdGVtSUQ6IGl0ZW1JRFxuICAgICAgICB9LFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmICFkYXRhLnN1Y2Nlc3MpIHsgY2FsbGJhY2soKTsgfVxuICAgICAgICAgICAgc2hvd1Jlc3BvbnNlTXNnKGRhdGEsIG51bGwpO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7IGNhbGxiYWNrKCk7IH1cbiAgICAgICAgICAgIHNob3dSZXNwb25zZU1zZyhlcnIpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG4vKipcbiAqIEBwYXJhbSB7T2JqZWN0fSAkZWxlbWVudEFwcGVuZFRvIC0gVGhlIGVsZW1lbnQgdG8gYXBwZW5kIGVycm9yIGh0bWwgdG9cbiAqIEBwYXJhbSB7c3RyaW5nfSBtc2cgLSBUaGUgZXJyb3IgbWVzc2FnZVxuICogZGlzcGxheSBlcnJvciBtZXNzYWdlIGlmIHJlbW92ZSBpdGVtIGZyb20gd2lzaGxpc3QgZmFpbGVkXG4gKi9cbmZ1bmN0aW9uIGRpc3BsYXlFcnJvck1lc3NhZ2UoJGVsZW1lbnRBcHBlbmRUbywgbXNnKSB7XG4gICAgaWYgKCQoJy5yZW1vdmUtZnJvbS13aXNobGlzdC1tZXNzYWdlcycpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAkZWxlbWVudEFwcGVuZFRvLmFwcGVuZChcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwicmVtb3ZlLWZyb20td2lzaGxpc3QtbWVzc2FnZXMgXCI+PC9kaXY+J1xuICAgICAgICApO1xuICAgIH1cbiAgICAkKCcucmVtb3ZlLWZyb20td2lzaGxpc3QtbWVzc2FnZXMnKVxuICAgICAgICAuYXBwZW5kKCc8ZGl2IGNsYXNzPVwicmVtb3ZlLWZyb20td2lzaGxpc3QtYWxlcnQgdGV4dC1jZW50ZXIgYWxlcnQtZGFuZ2VyXCI+JyArIG1zZyArICc8L2Rpdj4nKTtcblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcucmVtb3ZlLWZyb20td2lzaGxpc3QtbWVzc2FnZXMnKS5yZW1vdmUoKTtcbiAgICB9LCAzMDAwKTtcbn1cblxuLyoqXG4gKiByZW5kZXJzIHRoZSBsaXN0IHVwIHRvIGEgZ2l2ZW4gcGFnZSBudW1iZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSBwYWdlTnVtYmVyIC0gY3VycmVudCBwYWdlIG51bWJlclxuICogQHBhcmFtIHtib29sZWFufSBzcGlubmVyIC0gaWYgdGhlIHNwaW5uZXIgaGFzIGFscmVhZHkgc3RhcnRlZFxuICogQHBhcmFtIHtzdHJpbmd9IGZvY3VzRWxlbWVudFNlbGVjdG9yIC0gc2VsZWN0b3Igb2YgdGhlIGVsZW1lbnQgdG8gZm9jdXMgb25cbiAqL1xuZnVuY3Rpb24gcmVuZGVyTmV3UGFnZU9mSXRlbXMocGFnZU51bWJlciwgc3Bpbm5lciwgZm9jdXNFbGVtZW50U2VsZWN0b3IpIHtcbiAgICB2YXIgcHVibGljVmlldyA9ICQoJy53aXNobGlzdEl0ZW1DYXJkc0RhdGEnKS5kYXRhKCdwdWJsaWMtdmlldycpO1xuICAgIHZhciBsaXN0VVVJRCA9ICQoJy53aXNobGlzdEl0ZW1DYXJkc0RhdGEnKS5kYXRhKCd1dWlkJyk7XG4gICAgdmFyIHVybCA9ICQoJy53aXNobGlzdEl0ZW1DYXJkc0RhdGEnKS5kYXRhKCdocmVmJyk7XG4gICAgaWYgKHNwaW5uZXIpIHtcbiAgICAgICAgJC5zcGlubmVyKCkuc3RhcnQoKTtcbiAgICB9XG4gICAgdmFyIHNjcm9sbFBvc2l0aW9uID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcbiAgICB2YXIgbmV3UGFnZU51bWJlciA9IHBhZ2VOdW1iZXI7XG4gICAgJC5hamF4KHtcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIG1ldGhvZDogJ2dldCcsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHBhZ2VOdW1iZXI6ICsrbmV3UGFnZU51bWJlcixcbiAgICAgICAgICAgIHB1YmxpY1ZpZXc6IHB1YmxpY1ZpZXcsXG4gICAgICAgICAgICBpZDogbGlzdFVVSURcbiAgICAgICAgfVxuICAgIH0pLmRvbmUoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgJCgnLndpc2hsaXN0SXRlbUNhcmRzJykuZW1wdHkoKTtcbiAgICAgICAgJCgnYm9keSAud2lzaGxpc3RJdGVtQ2FyZHMnKS5hcHBlbmQoZGF0YSk7XG5cbiAgICAgICAgaWYgKGZvY3VzRWxlbWVudFNlbGVjdG9yKSB7XG4gICAgICAgICAgICAkKGZvY3VzRWxlbWVudFNlbGVjdG9yKS5mb2N1cygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA9IHNjcm9sbFBvc2l0aW9uO1xuICAgICAgICB9XG4gICAgfSkuZmFpbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy5tb3JlLXdsLWl0ZW1zJykucmVtb3ZlKCk7XG4gICAgfSk7XG4gICAgJC5zcGlubmVyKCkuc3RvcCgpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICByZW1vdmVGcm9tV2lzaGxpc3Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnYm9keScpLm9uKCdjbGljaycsICcucmVtb3ZlLWZyb20td2lzaGxpc3QnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIHVybCA9ICQodGhpcykuZGF0YSgndXJsJyk7XG4gICAgICAgICAgICB2YXIgZWxNeUFjY291bnQgPSAkKCcuYWNjb3VudC13aXNobGlzdC1pdGVtJykubGVuZ3RoO1xuXG4gICAgICAgICAgICAvLyBJZiB1c2VyIGlzIGluIG15IGFjY291bnQgcGFnZSwgY2FsbCByZW1vdmVXaXNobGlzdEFjY291bnQoKSBlbmQgcG9pbnQsIHJlLXJlbmRlciB3aXNobGlzdCBjYXJkc1xuICAgICAgICAgICAgaWYgKGVsTXlBY2NvdW50ID4gMCkge1xuICAgICAgICAgICAgICAgICQoJy53aXNobGlzdC1hY2NvdW50LWNhcmQnKS5zcGlubmVyKCkuc3RhcnQoKTtcbiAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2dldCcsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnaHRtbCcsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHt9LFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoaHRtbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLndpc2hsaXN0LWFjY291bnQtY2FyZD4uY2FyZCcpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLndpc2hsaXN0LWFjY291bnQtY2FyZCcpLmFwcGVuZChodG1sKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy53aXNobGlzdC1hY2NvdW50LWNhcmQnKS5zcGlubmVyKCkuc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRlbFRvQXBwZW5kID0gJCgnLndpc2hsaXN0LWFjY291bnQtY2FyZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGVsVG9BcHBlbmQuc3Bpbm5lcigpLnN0b3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtc2cgPSAkZWxUb0FwcGVuZC5kYXRhKCdlcnJvci1tc2cnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlFcnJvck1lc3NhZ2UoJGVsVG9BcHBlbmQsIG1zZyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIGVsc2UgdXNlciBpcyBpbiB3aXNobGlzdCBsYW5kaW5nIHBhZ2UsIGNhbGwgcmVtb3ZlUHJvZHVjdCgpIGVuZCBwb2ludCwgdGhlbiByZW1vdmUgdGhpcyBjYXJkXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQuc3Bpbm5lcigpLnN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdnZXQnLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhZ2VOdW1iZXIgPSAkKCcud2lzaGxpc3RJdGVtQ2FyZHNEYXRhJykuZGF0YSgncGFnZS1udW1iZXInKSAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJOZXdQYWdlT2ZJdGVtcyhwYWdlTnVtYmVyLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkLnNwaW5uZXIoKS5zdG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGVsVG9BcHBlbmRXTCA9ICQoJy53aXNobGlzdEl0ZW1DYXJkcycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1zZyA9ICRlbFRvQXBwZW5kV0wuZGF0YSgnZXJyb3ItbXNnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5RXJyb3JNZXNzYWdlKCRlbFRvQXBwZW5kV0wsIG1zZyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHZpZXdQcm9kdWN0VmlhRWRpdDogZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJy5lZGl0LWFkZC10by13aXNobGlzdCAuZWRpdCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHZhciBlZGl0UHJvZHVjdFVybCA9ICQodGhpcykuYXR0cignaHJlZicpO1xuICAgICAgICAgICAgJChlLnRhcmdldCkudHJpZ2dlcignZWRpdHdpc2hsaXN0cHJvZHVjdDpzaG93Jyk7XG4gICAgICAgICAgICBnZXRNb2RhbEh0bWxFbGVtZW50KCk7XG4gICAgICAgICAgICBmaWxsTW9kYWxFbGVtZW50KGVkaXRQcm9kdWN0VXJsKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHZpZXdQcm9kdWN0VmlhU2VsZWN0QXR0cmlidXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnLnNlbGVjdC1hdHRyaWJ1dGVzLWJ0bicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHZhciBlZGl0UHJvZHVjdFVybCA9ICQodGhpcykuZGF0YSgnZ2V0LXByb2R1Y3QtdXJsJyk7XG4gICAgICAgICAgICBnZXRNb2RhbEh0bWxFbGVtZW50KCk7XG4gICAgICAgICAgICBmaWxsTW9kYWxFbGVtZW50KGVkaXRQcm9kdWN0VXJsKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGZvY3VzRWRpdFdpc2hsaXN0UHJvZHVjdE1vZGFsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJ2JvZHknKS5vbignc2hvd24uYnMubW9kYWwnLCAnI2VkaXRXaXNobGlzdFByb2R1Y3RNb2RhbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoJyNlZGl0V2lzaGxpc3RQcm9kdWN0TW9kYWwnKS5zaWJsaW5ncygpLmF0dHIoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcbiAgICAgICAgICAgICQoJyNlZGl0V2lzaGxpc3RQcm9kdWN0TW9kYWwgLmNsb3NlJykuZm9jdXMoKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIG9uQ2xvc2luZ0VkaXRXaXNobGlzdFByb2R1Y3RNb2RhbDogZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCdib2R5Jykub24oJ2hpZGRlbi5icy5tb2RhbCcsICcjZWRpdFdpc2hsaXN0UHJvZHVjdE1vZGFsJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCgnI2VkaXRXaXNobGlzdFByb2R1Y3RNb2RhbCcpLnJlbW92ZSgpO1xuICAgICAgICAgICAgJCgnLm1vZGFsLWJhY2tkcm9wJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ21vZGFsLW9wZW4nKTtcblxuICAgICAgICAgICAgJCgnI2VkaXRXaXNobGlzdFByb2R1Y3RNb2RhbCcpLnNpYmxpbmdzKCkuYXR0cignYXJpYS1oaWRkZW4nLCAnZmFsc2UnKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHRyYXBFZGl0V2lzaGxpc3RQcm9kdWN0TW9kYWxGb2N1czogZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCdib2R5Jykub24oJ2tleWRvd24nLCAnI2VkaXRXaXNobGlzdFByb2R1Y3RNb2RhbCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZm9jdXNQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6IGUsXG4gICAgICAgICAgICAgICAgY29udGFpbmVyU2VsZWN0b3I6ICcjZWRpdFdpc2hsaXN0UHJvZHVjdE1vZGFsJyxcbiAgICAgICAgICAgICAgICBmaXJzdEVsZW1lbnRTZWxlY3RvcjogJy5jbG9zZScsXG4gICAgICAgICAgICAgICAgbGFzdEVsZW1lbnRTZWxlY3RvcjogJy5idG4tdXBkYXRlLXdpc2hsaXN0LXByb2R1Y3QnLFxuICAgICAgICAgICAgICAgIG5leHRUb0xhc3RFbGVtZW50U2VsZWN0b3I6ICcuc2VsZWN0LXNpemUnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZm9jdXNIZWxwZXIuc2V0VGFiTmV4dEZvY3VzKGZvY3VzUGFyYW1zKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHVwZGF0ZVdpc2hsaXN0VXBkYXRlQnV0dG9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJ2JvZHknKS5vbigncHJvZHVjdDp1cGRhdGVBZGRUb0NhcnQnLCBmdW5jdGlvbiAoZSwgcmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLiRwcm9kdWN0Q29udGFpbmVyLmZpbmQoJy5idG4tdXBkYXRlLXdpc2hsaXN0LXByb2R1Y3QnKS5hdHRyKCdkaXNhYmxlZCcsICFyZXNwb25zZS5wcm9kdWN0LnJlYWR5VG9PcmRlciB8fCAhcmVzcG9uc2UucHJvZHVjdC5hdmFpbGFibGUpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgdXBkYXRlV2lzaExpc3RJdGVtOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnLmJ0bi11cGRhdGUtd2lzaGxpc3QtcHJvZHVjdCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHZhciB1cGRhdGVCdXR0b25CbG9jayA9ICQodGhpcykuY2xvc2VzdCgnLndpc2hsaXN0LWl0ZW0tdXBkYXRlLWJ1dHRvbi1ibG9jaycpLmZpbmQoJy51cGRhdGUtd2lzaGxpc3QtdXJsJyk7XG4gICAgICAgICAgICB2YXIgdXBkYXRlUHJvZHVjdFVybCA9IHVwZGF0ZUJ1dHRvbkJsb2NrLnZhbCgpO1xuICAgICAgICAgICAgdmFyIHV1aWQgPSB1cGRhdGVCdXR0b25CbG9jay5kYXRhKCd1dWlkJyk7XG5cbiAgICAgICAgICAgIHZhciBmb3JtID0ge1xuICAgICAgICAgICAgICAgIHV1aWQ6IHV1aWQsXG4gICAgICAgICAgICAgICAgcGlkOiBiYXNlLmdldFBpZFZhbHVlKCQodGhpcykpXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAkKCcjZWRpdFdpc2hsaXN0UHJvZHVjdE1vZGFsJykuc3Bpbm5lcigpLnN0YXJ0KCk7XG5cbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOiB1cGRhdGVQcm9kdWN0VXJsLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdwb3N0JyxcbiAgICAgICAgICAgICAgICBjb250ZXh0OiB0aGlzLFxuICAgICAgICAgICAgICAgIGRhdGE6IGZvcm0sXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICQuc3Bpbm5lcigpLnN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgICAgICQoJyNlZGl0V2lzaGxpc3RQcm9kdWN0TW9kYWwnKS5zcGlubmVyKCkuc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICAkKCcjZWRpdFdpc2hsaXN0UHJvZHVjdE1vZGFsJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5tb2RhbC1iYWNrZHJvcCcpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ21vZGFsLW9wZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhZ2VOdW1iZXIgPSAkKCcud2lzaGxpc3RJdGVtQ2FyZHNEYXRhJykuZGF0YSgncGFnZS1udW1iZXInKSAtIDE7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlck5ld1BhZ2VPZkl0ZW1zKHBhZ2VOdW1iZXIsIGZhbHNlLCAnLnByb2R1Y3QtaW5mbyAuZWRpdC1hZGQtdG8td2lzaGxpc3QgLmVkaXQ6Zmlyc3QnKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtc2cgPSAkKCcuYnRuLXVwZGF0ZS13aXNobGlzdC1wcm9kdWN0JykuZGF0YSgnZXJyb3ItbXNnJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgJCgnI2VkaXRXaXNobGlzdFByb2R1Y3RNb2RhbCcpLnNwaW5uZXIoKS5zdG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICQoJyNlZGl0V2lzaGxpc3RQcm9kdWN0TW9kYWwnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLm1vZGFsLWJhY2tkcm9wJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnbW9kYWwtb3BlbicpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICgkKCcudXBkYXRlLXdpc2hsaXN0LW1lc3NhZ2VzJykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwidXBkYXRlLXdpc2hsaXN0LW1lc3NhZ2VzIFwiPjwvZGl2PidcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAkKCcudXBkYXRlLXdpc2hsaXN0LW1lc3NhZ2VzJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJzxkaXYgY2xhc3M9XCJ1cGRhdGUtd2lzaGxpc3QtYWxlcnQgdGV4dC1jZW50ZXIgYWxlcnQtZGFuZ2VyXCI+JyArIG1zZyArICc8L2Rpdj4nKTtcblxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy51cGRhdGUtd2lzaGxpc3QtbWVzc2FnZXMnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgNTAwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICB0b2dnbGVXaXNobGlzdFN0YXR1czogZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcjaXNQdWJsaWNMaXN0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGxpc3RJRCA9ICQoJyNpc1B1YmxpY0xpc3QnKS5kYXRhKCdpZCcpO1xuICAgICAgICAgICAgdXBkYXRlUHVibGljU3RhdHVzKGxpc3RJRCwgbnVsbCwgbnVsbCk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICB0b2dnbGVXaXNobGlzdEl0ZW1TdGF0dXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnYm9keScpLm9uKCdjbGljaycsICcud2lzaGxpc3QtaXRlbS1jaGVja2JveCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpdGVtSUQgPSAkKHRoaXMpLmNsb3Nlc3QoJy53aXNobGlzdC1oaWRlJykuZmluZCgnLmN1c3RvbS1jb250cm9sLWlucHV0JykuZGF0YSgnaWQnKTtcbiAgICAgICAgICAgIHZhciBlbCA9ICQodGhpcykuc2libGluZ3MoJ2lucHV0Jyk7XG4gICAgICAgICAgICB2YXIgcmVzZXRDaGVja0JveCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWwucHJvcCgnY2hlY2tlZCcpXG4gICAgICAgICAgICAgICAgICAgID8gZWwucHJvcCgnY2hlY2tlZCcsIGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICA6IGVsLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHVwZGF0ZVB1YmxpY1N0YXR1cyhudWxsLCBpdGVtSUQsIHJlc2V0Q2hlY2tCb3gpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgYWRkVG9DYXJ0RnJvbVdpc2hsaXN0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnLmFkZC10by1jYXJ0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHBpZDtcbiAgICAgICAgICAgIHZhciBhZGRUb0NhcnRVcmw7XG4gICAgICAgICAgICB2YXIgcGlkc1F0eTtcblxuICAgICAgICAgICAgJCgnYm9keScpLnRyaWdnZXIoJ3Byb2R1Y3Q6YmVmb3JlQWRkVG9DYXJ0JywgdGhpcyk7XG5cbiAgICAgICAgICAgIHBpZCA9ICQodGhpcykuZGF0YSgncGlkJyk7XG4gICAgICAgICAgICBhZGRUb0NhcnRVcmwgPSAkKHRoaXMpLmRhdGEoJ3VybCcpO1xuICAgICAgICAgICAgcGlkc1F0eSA9IHBhcnNlSW50KCQodGhpcykuY2xvc2VzdCgnLnByb2R1Y3QtaW5mbycpLmZpbmQoJy5xdWFudGl0eScpLnZhbCgpLCAxMCk7XG5cbiAgICAgICAgICAgIHZhciBmb3JtID0ge1xuICAgICAgICAgICAgICAgIHBpZDogcGlkLFxuICAgICAgICAgICAgICAgIHF1YW50aXR5OiBwaWRzUXR5XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5kYXRhKCdvcHRpb24nKSkge1xuICAgICAgICAgICAgICAgIGZvcm0ub3B0aW9ucyA9IEpTT04uc3RyaW5naWZ5KCQodGhpcykuZGF0YSgnb3B0aW9uJykpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkKHRoaXMpLnRyaWdnZXIoJ3VwZGF0ZUFkZFRvQ2FydEZvcm1EYXRhJywgZm9ybSk7XG4gICAgICAgICAgICBpZiAoYWRkVG9DYXJ0VXJsKSB7XG4gICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBhZGRUb0NhcnRVcmwsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBmb3JtLFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlUG9zdENhcnRBZGQoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCdib2R5JykudHJpZ2dlcigncHJvZHVjdDphZnRlckFkZFRvQ2FydCcsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJC5zcGlubmVyKCkuc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZS5taW5pQ2FydFJlcG9ydGluZ1VybChkYXRhLnJlcG9ydGluZ1VSTCwgZGF0YS5lcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkLnNwaW5uZXIoKS5zdG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBtb3JlV0xJdGVtczogZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJy5tb3JlLXdsLWl0ZW1zJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHBhZ2VOdW1iZXIgPSAkKCcud2lzaGxpc3RJdGVtQ2FyZHNEYXRhJykuZGF0YSgncGFnZS1udW1iZXInKTtcbiAgICAgICAgICAgIHJlbmRlck5ld1BhZ2VPZkl0ZW1zKHBhZ2VOdW1iZXIsIHRydWUpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGNvcHlXaXNobGlzdExpbms6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnYm9keScpLm9uKCdjbGljaycsICcuZmEtbGluaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciAkdGVtcCA9ICQoJzxpbnB1dD4nKTtcbiAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJHRlbXApO1xuICAgICAgICAgICAgJHRlbXAudmFsKCQoJyNzaGFyZVVybCcpLnZhbCgpKS5zZWxlY3QoKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdjb3B5Jyk7XG4gICAgICAgICAgICAkdGVtcC5yZW1vdmUoKTtcbiAgICAgICAgICAgICQoJy5jb3B5LWxpbmstbWVzc2FnZScpLnJlbW92ZUNsYXNzKCdkLW5vbmUnKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQoJy5jb3B5LWxpbmstbWVzc2FnZScpLmFkZENsYXNzKCdkLW5vbmUnKTtcbiAgICAgICAgICAgIH0sIDMwMDApO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIHN1Ym1pdFdpc2hsaXN0U2VhcmNoOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnI3dpc2hsaXN0LXNlYXJjaCBidXR0b24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGZpcnN0TmFtZSA9ICQoJyN3aXNobGlzdC1zZWFyY2gtZmlyc3QtbmFtZScpLnZhbCgpO1xuICAgICAgICAgICAgdmFyIGxhc3ROYW1lID0gJCgnI3dpc2hsaXN0LXNlYXJjaC1sYXN0LW5hbWUnKS52YWwoKTtcbiAgICAgICAgICAgIHZhciBlbWFpbCA9ICQoJyN3aXNobGlzdC1zZWFyY2gtZW1haWwnKS52YWwoKTtcblxuICAgICAgICAgICAgaWYgKCghZmlyc3ROYW1lICYmICFsYXN0TmFtZSAmJiAhZW1haWwpXG4gICAgICAgICAgICAgICAgfHwgKGZpcnN0TmFtZSAmJiAhbGFzdE5hbWUgJiYgIWVtYWlsKVxuICAgICAgICAgICAgICAgIHx8ICghZmlyc3ROYW1lICYmIGxhc3ROYW1lICYmICFlbWFpbCkpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgJCgnLndpc2hsaXN0LWVycm9yLXNlYXJjaCBkaXYnKS5hZGRDbGFzcygnYWxlcnQgYWxlcnQtZGFuZ2VyJyk7XG4gICAgICAgICAgICAgICAgdmFyIGVycm9yVGV4dCA9ICQoJy53aXNobGlzdC1lcnJvci1zZWFyY2gnKS5kYXRhKCdlcnJvci1tc2cnKTtcbiAgICAgICAgICAgICAgICAkKCcud2lzaGxpc3QtZXJyb3Itc2VhcmNoIGRpdicpLmh0bWwoZXJyb3JUZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBtb3JlV0xTZWFyY2hSZXN1bHRzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnLm1vcmUtd2wtcmVzdWx0cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBmaXJzdE5hbWUgPSAkKHRoaXMpLmRhdGEoJ3NlYXJjaC1mbmFtZScpO1xuICAgICAgICAgICAgdmFyIGxhc3ROYW1lID0gJCh0aGlzKS5kYXRhKCdzZWFyY2gtbG5hbWUnKTtcbiAgICAgICAgICAgIHZhciBwYWdlTnVtYmVyID0gJCh0aGlzKS5kYXRhKCdwYWdlLW51bWJlcicpO1xuICAgICAgICAgICAgdmFyIHV1aWRzID0gW107XG4gICAgICAgICAgICAkKCcud2wtaGl0JykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdXVpZHMucHVzaCgkKHRoaXMpLmZpbmQoJ2EnKS5kYXRhKCdpZCcpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIHVybCA9ICQodGhpcykuZGF0YSgndXJsJyk7XG4gICAgICAgICAgICAkLnNwaW5uZXIoKS5zdGFydCgpO1xuICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogZmlyc3ROYW1lLFxuICAgICAgICAgICAgICAgICAgICBsYXN0TmFtZTogbGFzdE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHV1aWRzOiBKU09OLnN0cmluZ2lmeSh1dWlkcyksXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VOdW1iZXI6ICsrcGFnZU51bWJlclxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEucmVzdWx0cy5jaGFuZ2VkTGlzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLndsLWhpdHMgLndsLWhpdCcpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICQoJyNyZXN1bHQtY291bnQnKS5odG1sKGRhdGEucmVzdWx0cy50b3RhbFN0cmluZyk7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEucmVzdWx0cy5oaXRzLmZvckVhY2goZnVuY3Rpb24gKGhpdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpdlN0cmluZyA9ICc8ZGl2IGNsYXNzPVwicm93IHdsLWhpdFwiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwidGV4dC1sZWZ0IGNvbC02XCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpdC5maXJzdE5hbWUgKyAnICcgKyBoaXQubGFzdE5hbWUgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInRleHQtcmlnaHQgY29sLTZcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxhIGhyZWY9XCInICsgaGl0LnVybCArICdcIiB0aXRsZT1cIicgKyBoaXQudXJsVGl0bGUgKyAnXCIgZGF0YS1pZD1cIicgKyBoaXQuaWQgKyAnXCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaXQudXJsVGV4dCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L2E+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLndsLWhpdHMnKS5hcHBlbmQoZGl2U3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnJlc3VsdHMuc2hvd01vcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5maW5kLWFub3RoZXItd2wgLm1vcmUtd2wtcmVzdWx0cycpLmRhdGEoJ3BhZ2UtbnVtYmVyJywgZGF0YS5yZXN1bHRzLnBhZ2VOdW1iZXIpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmZpbmQtYW5vdGhlci13bCAubW9yZS13bC1yZXN1bHRzJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgJC5zcGlubmVyKCkuc3RvcCgpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJC5zcGlubmVyKCkuc3RvcCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./cartridges/app_mycustom_cartridge/cartridge/client/default/js/wishlist/wishlist.js\n");

/***/ }),

/***/ "./cartridges/app_storefront_base/cartridge/client/default/js/components/focus.js":
/*!****************************************************************************************!*\
  !*** ./cartridges/app_storefront_base/cartridge/client/default/js/components/focus.js ***!
  \****************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nmodule.exports = {\n    setTabNextFocus: function (focusParams) {\n        var KEYCODE_TAB = 9;\n        var isTabPressed = (focusParams.event.key === 'Tab' || focusParams.event.keyCode === KEYCODE_TAB);\n\n        if (!isTabPressed) {\n            return;\n        }\n\n        var firstFocusableEl = $(focusParams.containerSelector + ' ' + focusParams.firstElementSelector);\n        var lastFocusableEl = $(focusParams.containerSelector + ' ' + focusParams.lastElementSelector);\n\n        if ($(focusParams.containerSelector + ' ' + focusParams.lastElementSelector).is(':disabled')) {\n            lastFocusableEl = $(focusParams.containerSelector + ' ' + focusParams.nextToLastElementSelector);\n            if ($('.product-quickview.product-set').length > 0) {\n                var linkElements = $(focusParams.containerSelector + ' a#fa-link.share-icons');\n                lastFocusableEl = linkElements[linkElements.length - 1];\n            }\n        }\n\n        if (focusParams.event.shiftKey) /* shift + tab */ {\n            if ($(':focus').is(firstFocusableEl)) {\n                lastFocusableEl.focus();\n                focusParams.event.preventDefault();\n            }\n        } else /* tab */ {\n            if ($(':focus').is(lastFocusableEl)) { // eslint-disable-line\n                firstFocusableEl.focus();\n                focusParams.event.preventDefault();\n            }\n        }\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jYXJ0cmlkZ2VzL2FwcF9zdG9yZWZyb250X2Jhc2UvY2FydHJpZGdlL2NsaWVudC9kZWZhdWx0L2pzL2NvbXBvbmVudHMvZm9jdXMuanM/ZDMxMiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULGtEQUFrRDtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiLi9jYXJ0cmlkZ2VzL2FwcF9zdG9yZWZyb250X2Jhc2UvY2FydHJpZGdlL2NsaWVudC9kZWZhdWx0L2pzL2NvbXBvbmVudHMvZm9jdXMuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIHNldFRhYk5leHRGb2N1czogZnVuY3Rpb24gKGZvY3VzUGFyYW1zKSB7XG4gICAgICAgIHZhciBLRVlDT0RFX1RBQiA9IDk7XG4gICAgICAgIHZhciBpc1RhYlByZXNzZWQgPSAoZm9jdXNQYXJhbXMuZXZlbnQua2V5ID09PSAnVGFiJyB8fCBmb2N1c1BhcmFtcy5ldmVudC5rZXlDb2RlID09PSBLRVlDT0RFX1RBQik7XG5cbiAgICAgICAgaWYgKCFpc1RhYlByZXNzZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBmaXJzdEZvY3VzYWJsZUVsID0gJChmb2N1c1BhcmFtcy5jb250YWluZXJTZWxlY3RvciArICcgJyArIGZvY3VzUGFyYW1zLmZpcnN0RWxlbWVudFNlbGVjdG9yKTtcbiAgICAgICAgdmFyIGxhc3RGb2N1c2FibGVFbCA9ICQoZm9jdXNQYXJhbXMuY29udGFpbmVyU2VsZWN0b3IgKyAnICcgKyBmb2N1c1BhcmFtcy5sYXN0RWxlbWVudFNlbGVjdG9yKTtcblxuICAgICAgICBpZiAoJChmb2N1c1BhcmFtcy5jb250YWluZXJTZWxlY3RvciArICcgJyArIGZvY3VzUGFyYW1zLmxhc3RFbGVtZW50U2VsZWN0b3IpLmlzKCc6ZGlzYWJsZWQnKSkge1xuICAgICAgICAgICAgbGFzdEZvY3VzYWJsZUVsID0gJChmb2N1c1BhcmFtcy5jb250YWluZXJTZWxlY3RvciArICcgJyArIGZvY3VzUGFyYW1zLm5leHRUb0xhc3RFbGVtZW50U2VsZWN0b3IpO1xuICAgICAgICAgICAgaWYgKCQoJy5wcm9kdWN0LXF1aWNrdmlldy5wcm9kdWN0LXNldCcpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgbGlua0VsZW1lbnRzID0gJChmb2N1c1BhcmFtcy5jb250YWluZXJTZWxlY3RvciArICcgYSNmYS1saW5rLnNoYXJlLWljb25zJyk7XG4gICAgICAgICAgICAgICAgbGFzdEZvY3VzYWJsZUVsID0gbGlua0VsZW1lbnRzW2xpbmtFbGVtZW50cy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmb2N1c1BhcmFtcy5ldmVudC5zaGlmdEtleSkgLyogc2hpZnQgKyB0YWIgKi8ge1xuICAgICAgICAgICAgaWYgKCQoJzpmb2N1cycpLmlzKGZpcnN0Rm9jdXNhYmxlRWwpKSB7XG4gICAgICAgICAgICAgICAgbGFzdEZvY3VzYWJsZUVsLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgZm9jdXNQYXJhbXMuZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIC8qIHRhYiAqLyB7XG4gICAgICAgICAgICBpZiAoJCgnOmZvY3VzJykuaXMobGFzdEZvY3VzYWJsZUVsKSkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgICAgICAgICAgICAgZmlyc3RGb2N1c2FibGVFbC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIGZvY3VzUGFyYW1zLmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./cartridges/app_storefront_base/cartridge/client/default/js/components/focus.js\n");

/***/ }),

/***/ "./cartridges/app_storefront_base/cartridge/client/default/js/product/base.js":
/*!************************************************************************************!*\
  !*** ./cartridges/app_storefront_base/cartridge/client/default/js/product/base.js ***!
  \************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar focusHelper = __webpack_require__(/*! ../components/focus */ \"./cartridges/app_storefront_base/cartridge/client/default/js/components/focus.js\");\n\n/**\n * Retrieves the relevant pid value\n * @param {jquery} $el - DOM container for a given add to cart button\n * @return {string} - value to be used when adding product to cart\n */\nfunction getPidValue($el) {\n    var pid;\n\n    if ($('#quickViewModal').hasClass('show') && !$('.product-set').length) {\n        pid = $($el).closest('.modal-content').find('.product-quickview').data('pid');\n    } else if ($('.product-set-detail').length || $('.product-set').length) {\n        pid = $($el).closest('.product-detail').find('.product-id').text();\n    } else {\n        pid = $('.product-detail:not(\".bundle-item\")').data('pid');\n    }\n\n    return pid;\n}\n\n/**\n * Retrieve contextual quantity selector\n * @param {jquery} $el - DOM container for the relevant quantity\n * @return {jquery} - quantity selector DOM container\n */\nfunction getQuantitySelector($el) {\n    return $el && $('.set-items').length\n        ? $($el).closest('.product-detail').find('.quantity-select')\n        : $('.quantity-select');\n}\n\n/**\n * Retrieves the value associated with the Quantity pull-down menu\n * @param {jquery} $el - DOM container for the relevant quantity\n * @return {string} - value found in the quantity input\n */\nfunction getQuantitySelected($el) {\n    return getQuantitySelector($el).val();\n}\n\n/**\n * Process the attribute values for an attribute that has image swatches\n *\n * @param {Object} attr - Attribute\n * @param {string} attr.id - Attribute ID\n * @param {Object[]} attr.values - Array of attribute value objects\n * @param {string} attr.values.value - Attribute coded value\n * @param {string} attr.values.url - URL to de/select an attribute value of the product\n * @param {boolean} attr.values.isSelectable - Flag as to whether an attribute value can be\n *     selected.  If there is no variant that corresponds to a specific combination of attribute\n *     values, an attribute may be disabled in the Product Detail Page\n * @param {jQuery} $productContainer - DOM container for a given product\n * @param {Object} msgs - object containing resource messages\n */\nfunction processSwatchValues(attr, $productContainer, msgs) {\n    attr.values.forEach(function (attrValue) {\n        var $attrValue = $productContainer.find('[data-attr=\"' + attr.id + '\"] [data-attr-value=\"' +\n            attrValue.value + '\"]');\n        var $swatchButton = $attrValue.parent();\n\n        if (attrValue.selected) {\n            $attrValue.addClass('selected');\n            $attrValue.siblings('.selected-assistive-text').text(msgs.assistiveSelectedText);\n        } else {\n            $attrValue.removeClass('selected');\n            $attrValue.siblings('.selected-assistive-text').empty();\n        }\n\n        if (attrValue.url) {\n            $swatchButton.attr('data-url', attrValue.url);\n        } else {\n            $swatchButton.removeAttr('data-url');\n        }\n\n        // Disable if not selectable\n        $attrValue.removeClass('selectable unselectable');\n\n        $attrValue.addClass(attrValue.selectable ? 'selectable' : 'unselectable');\n    });\n}\n\n/**\n * Process attribute values associated with an attribute that does not have image swatches\n *\n * @param {Object} attr - Attribute\n * @param {string} attr.id - Attribute ID\n * @param {Object[]} attr.values - Array of attribute value objects\n * @param {string} attr.values.value - Attribute coded value\n * @param {string} attr.values.url - URL to de/select an attribute value of the product\n * @param {boolean} attr.values.isSelectable - Flag as to whether an attribute value can be\n *     selected.  If there is no variant that corresponds to a specific combination of attribute\n *     values, an attribute may be disabled in the Product Detail Page\n * @param {jQuery} $productContainer - DOM container for a given product\n */\nfunction processNonSwatchValues(attr, $productContainer) {\n    var $attr = '[data-attr=\"' + attr.id + '\"]';\n    var $defaultOption = $productContainer.find($attr + ' .select-' + attr.id + ' option:first');\n    $defaultOption.attr('value', attr.resetUrl);\n\n    attr.values.forEach(function (attrValue) {\n        var $attrValue = $productContainer\n            .find($attr + ' [data-attr-value=\"' + attrValue.value + '\"]');\n        $attrValue.attr('value', attrValue.url)\n            .removeAttr('disabled');\n\n        if (!attrValue.selectable) {\n            $attrValue.attr('disabled', true);\n        }\n    });\n}\n\n/**\n * Routes the handling of attribute processing depending on whether the attribute has image\n *     swatches or not\n *\n * @param {Object} attrs - Attribute\n * @param {string} attr.id - Attribute ID\n * @param {jQuery} $productContainer - DOM element for a given product\n * @param {Object} msgs - object containing resource messages\n */\nfunction updateAttrs(attrs, $productContainer, msgs) {\n    // Currently, the only attribute type that has image swatches is Color.\n    var attrsWithSwatches = ['color'];\n\n    attrs.forEach(function (attr) {\n        if (attrsWithSwatches.indexOf(attr.id) > -1) {\n            processSwatchValues(attr, $productContainer, msgs);\n        } else {\n            processNonSwatchValues(attr, $productContainer);\n        }\n    });\n}\n\n/**\n * Updates the availability status in the Product Detail Page\n *\n * @param {Object} response - Ajax response object after an\n *                            attribute value has been [de]selected\n * @param {jQuery} $productContainer - DOM element for a given product\n */\nfunction updateAvailability(response, $productContainer) {\n    var availabilityValue = '';\n    var availabilityMessages = response.product.availability.messages;\n    if (!response.product.readyToOrder) {\n        availabilityValue = '<li><div>' + response.resources.info_selectforstock + '</div></li>';\n    } else {\n        availabilityMessages.forEach(function (message) {\n            availabilityValue += '<li><div>' + message + '</div></li>';\n        });\n    }\n\n    $($productContainer).trigger('product:updateAvailability', {\n        product: response.product,\n        $productContainer: $productContainer,\n        message: availabilityValue,\n        resources: response.resources\n    });\n}\n\n/**\n * Generates html for product attributes section\n *\n * @param {array} attributes - list of attributes\n * @return {string} - Compiled HTML\n */\nfunction getAttributesHtml(attributes) {\n    if (!attributes) {\n        return '';\n    }\n\n    var html = '';\n\n    attributes.forEach(function (attributeGroup) {\n        if (attributeGroup.ID === 'mainAttributes') {\n            attributeGroup.attributes.forEach(function (attribute) {\n                html += '<div class=\"attribute-values\">' + attribute.label + ': '\n                    + attribute.value + '</div>';\n            });\n        }\n    });\n\n    return html;\n}\n\n/**\n * @typedef UpdatedOptionValue\n * @type Object\n * @property {string} id - Option value ID for look up\n * @property {string} url - Updated option value selection URL\n */\n\n/**\n * @typedef OptionSelectionResponse\n * @type Object\n * @property {string} priceHtml - Updated price HTML code\n * @property {Object} options - Updated Options\n * @property {string} options.id - Option ID\n * @property {UpdatedOptionValue[]} options.values - Option values\n */\n\n/**\n * Updates DOM using post-option selection Ajax response\n *\n * @param {OptionSelectionResponse} optionsHtml - Ajax response optionsHtml from selecting a product option\n * @param {jQuery} $productContainer - DOM element for current product\n */\nfunction updateOptions(optionsHtml, $productContainer) {\n\t// Update options\n    $productContainer.find('.product-options').empty().html(optionsHtml);\n}\n\n/**\n * Dynamically creates Bootstrap carousel from response containing images\n * @param {Object[]} imgs - Array of large product images,along with related information\n * @param {jQuery} $productContainer - DOM element for a given product\n */\nfunction createCarousel(imgs, $productContainer) {\n    var carousel = $productContainer.find('.carousel');\n    $(carousel).carousel('dispose');\n    var carouselId = $(carousel).attr('id');\n    $(carousel).empty().append('<ol class=\"carousel-indicators\"></ol><div class=\"carousel-inner\" role=\"listbox\"></div><a class=\"carousel-control-prev\" href=\"#' + carouselId + '\" role=\"button\" data-slide=\"prev\"><span class=\"fa icon-prev\" aria-hidden=\"true\"></span><span class=\"sr-only\">' + $(carousel).data('prev') + '</span></a><a class=\"carousel-control-next\" href=\"#' + carouselId + '\" role=\"button\" data-slide=\"next\"><span class=\"fa icon-next\" aria-hidden=\"true\"></span><span class=\"sr-only\">' + $(carousel).data('next') + '</span></a>');\n    for (var i = 0; i < imgs.length; i++) {\n        $('<div class=\"carousel-item\"><img src=\"' + imgs[i].url + '\" class=\"d-block img-fluid\" alt=\"' + imgs[i].alt + ' image number ' + parseInt(imgs[i].index, 10) + '\" title=\"' + imgs[i].title + '\" itemprop=\"image\" /></div>').appendTo($(carousel).find('.carousel-inner'));\n        $('<li data-target=\"#' + carouselId + '\" data-slide-to=\"' + i + '\" class=\"\"></li>').appendTo($(carousel).find('.carousel-indicators'));\n    }\n    $($(carousel).find('.carousel-item')).first().addClass('active');\n    $($(carousel).find('.carousel-indicators > li')).first().addClass('active');\n    if (imgs.length === 1) {\n        $($(carousel).find('.carousel-indicators, a[class^=\"carousel-control-\"]')).detach();\n    }\n    $(carousel).carousel();\n    $($(carousel).find('.carousel-indicators')).attr('aria-hidden', true);\n}\n\n/**\n * Parses JSON from Ajax call made whenever an attribute value is [de]selected\n * @param {Object} response - response from Ajax call\n * @param {Object} response.product - Product object\n * @param {string} response.product.id - Product ID\n * @param {Object[]} response.product.variationAttributes - Product attributes\n * @param {Object[]} response.product.images - Product images\n * @param {boolean} response.product.hasRequiredAttrsSelected - Flag as to whether all required\n *     attributes have been selected.  Used partially to\n *     determine whether the Add to Cart button can be enabled\n * @param {jQuery} $productContainer - DOM element for a given product.\n */\nfunction handleVariantResponse(response, $productContainer) {\n    var isChoiceOfBonusProducts =\n        $productContainer.parents('.choose-bonus-product-dialog').length > 0;\n    var isVaraint;\n    if (response.product.variationAttributes) {\n        updateAttrs(response.product.variationAttributes, $productContainer, response.resources);\n        isVaraint = response.product.productType === 'variant';\n        if (isChoiceOfBonusProducts && isVaraint) {\n            $productContainer.parent('.bonus-product-item')\n                .data('pid', response.product.id);\n\n            $productContainer.parent('.bonus-product-item')\n                .data('ready-to-order', response.product.readyToOrder);\n        }\n    }\n\n    // Update primary images\n    var primaryImageUrls = response.product.images.large;\n    createCarousel(primaryImageUrls, $productContainer);\n\n    // Update pricing\n    if (!isChoiceOfBonusProducts) {\n        var $priceSelector = $('.prices .price', $productContainer).length\n            ? $('.prices .price', $productContainer)\n            : $('.prices .price');\n        $priceSelector.replaceWith(response.product.price.html);\n    }\n\n    // Update promotions\n    $productContainer.find('.promotions').empty().html(response.product.promotionsHtml);\n\n    updateAvailability(response, $productContainer);\n\n    if (isChoiceOfBonusProducts) {\n        var $selectButton = $productContainer.find('.select-bonus-product');\n        $selectButton.trigger('bonusproduct:updateSelectButton', {\n            product: response.product, $productContainer: $productContainer\n        });\n    } else {\n        // Enable \"Add to Cart\" button if all required attributes have been selected\n        $('button.add-to-cart, button.add-to-cart-global, button.update-cart-product-global').trigger('product:updateAddToCart', {\n            product: response.product, $productContainer: $productContainer\n        }).trigger('product:statusUpdate', response.product);\n    }\n\n    // Update attributes\n    $productContainer.find('.main-attributes').empty()\n        .html(getAttributesHtml(response.product.attributes));\n}\n\n/**\n * @typespec UpdatedQuantity\n * @type Object\n * @property {boolean} selected - Whether the quantity has been selected\n * @property {string} value - The number of products to purchase\n * @property {string} url - Compiled URL that specifies variation attributes, product ID, options,\n *     etc.\n */\n\n/**\n * Updates the quantity DOM elements post Ajax call\n * @param {UpdatedQuantity[]} quantities -\n * @param {jQuery} $productContainer - DOM container for a given product\n */\nfunction updateQuantities(quantities, $productContainer) {\n    if (!($productContainer.parent('.bonus-product-item').length > 0)) {\n        var optionsHtml = quantities.map(function (quantity) {\n            var selected = quantity.selected ? ' selected ' : '';\n            return '<option value=\"' + quantity.value + '\"  data-url=\"' + quantity.url + '\"' +\n                selected + '>' + quantity.value + '</option>';\n        }).join('');\n        getQuantitySelector($productContainer).empty().html(optionsHtml);\n    }\n}\n\n/**\n * updates the product view when a product attribute is selected or deselected or when\n *         changing quantity\n * @param {string} selectedValueUrl - the Url for the selected variation value\n * @param {jQuery} $productContainer - DOM element for current product\n */\nfunction attributeSelect(selectedValueUrl, $productContainer) {\n    if (selectedValueUrl) {\n        $('body').trigger('product:beforeAttributeSelect',\n            { url: selectedValueUrl, container: $productContainer });\n\n        $.ajax({\n            url: selectedValueUrl,\n            method: 'GET',\n            success: function (data) {\n                handleVariantResponse(data, $productContainer);\n                updateOptions(data.product.optionsHtml, $productContainer);\n                updateQuantities(data.product.quantities, $productContainer);\n                $('body').trigger('product:afterAttributeSelect',\n                    { data: data, container: $productContainer });\n                $.spinner().stop();\n            },\n            error: function () {\n                $.spinner().stop();\n            }\n        });\n    }\n}\n\n/**\n * Retrieves url to use when adding a product to the cart\n *\n * @return {string} - The provided URL to use when adding a product to the cart\n */\nfunction getAddToCartUrl() {\n    return $('.add-to-cart-url').val();\n}\n\n/**\n * Parses the html for a modal window\n * @param {string} html - representing the body and footer of the modal window\n *\n * @return {Object} - Object with properties body and footer.\n */\nfunction parseHtml(html) {\n    var $html = $('<div>').append($.parseHTML(html));\n\n    var body = $html.find('.choice-of-bonus-product');\n    var footer = $html.find('.modal-footer').children();\n\n    return { body: body, footer: footer };\n}\n\n/**\n * Retrieves url to use when adding a product to the cart\n *\n * @param {Object} data - data object used to fill in dynamic portions of the html\n */\nfunction chooseBonusProducts(data) {\n    $('.modal-body').spinner().start();\n\n    if ($('#chooseBonusProductModal').length !== 0) {\n        $('#chooseBonusProductModal').remove();\n    }\n    var bonusUrl;\n    if (data.bonusChoiceRuleBased) {\n        bonusUrl = data.showProductsUrlRuleBased;\n    } else {\n        bonusUrl = data.showProductsUrlListBased;\n    }\n\n    var htmlString = '<!-- Modal -->'\n        + '<div class=\"modal fade\" id=\"chooseBonusProductModal\" tabindex=\"-1\" role=\"dialog\">'\n        + '<span class=\"enter-message sr-only\" ></span>'\n        + '<div class=\"modal-dialog choose-bonus-product-dialog\" '\n        + 'data-total-qty=\"' + data.maxBonusItems + '\"'\n        + 'data-UUID=\"' + data.uuid + '\"'\n        + 'data-pliUUID=\"' + data.pliUUID + '\"'\n        + 'data-addToCartUrl=\"' + data.addToCartUrl + '\"'\n        + 'data-pageStart=\"0\"'\n        + 'data-pageSize=\"' + data.pageSize + '\"'\n        + 'data-moreURL=\"' + data.showProductsUrlRuleBased + '\"'\n        + 'data-bonusChoiceRuleBased=\"' + data.bonusChoiceRuleBased + '\">'\n        + '<!-- Modal content-->'\n        + '<div class=\"modal-content\">'\n        + '<div class=\"modal-header\">'\n        + '    <span class=\"\">' + data.labels.selectprods + '</span>'\n        + '    <button type=\"button\" class=\"close pull-right\" data-dismiss=\"modal\">'\n        + '        <span aria-hidden=\"true\">&times;</span>'\n        + '        <span class=\"sr-only\"> </span>'\n        + '    </button>'\n        + '</div>'\n        + '<div class=\"modal-body\"></div>'\n        + '<div class=\"modal-footer\"></div>'\n        + '</div>'\n        + '</div>'\n        + '</div>';\n    $('body').append(htmlString);\n    $('.modal-body').spinner().start();\n\n    $.ajax({\n        url: bonusUrl,\n        method: 'GET',\n        dataType: 'json',\n        success: function (response) {\n            var parsedHtml = parseHtml(response.renderedTemplate);\n            $('#chooseBonusProductModal .modal-body').empty();\n            $('#chooseBonusProductModal .enter-message').text(response.enterDialogMessage);\n            $('#chooseBonusProductModal .modal-header .close .sr-only').text(response.closeButtonText);\n            $('#chooseBonusProductModal .modal-body').html(parsedHtml.body);\n            $('#chooseBonusProductModal .modal-footer').html(parsedHtml.footer);\n            $('#chooseBonusProductModal').modal('show');\n            $.spinner().stop();\n        },\n        error: function () {\n            $.spinner().stop();\n        }\n    });\n}\n\n/**\n * Updates the Mini-Cart quantity value after the customer has pressed the \"Add to Cart\" button\n * @param {string} response - ajax response from clicking the add to cart button\n */\nfunction handlePostCartAdd(response) {\n    $('.minicart').trigger('count:update', response);\n    var messageType = response.error ? 'alert-danger' : 'alert-success';\n    // show add to cart toast\n    if (response.newBonusDiscountLineItem\n        && Object.keys(response.newBonusDiscountLineItem).length !== 0) {\n        chooseBonusProducts(response.newBonusDiscountLineItem);\n    } else {\n        if ($('.add-to-cart-messages').length === 0) {\n            $('body').append(\n                '<div class=\"add-to-cart-messages\"></div>'\n            );\n        }\n\n        $('.add-to-cart-messages').append(\n            '<div class=\"alert ' + messageType + ' add-to-basket-alert text-center\" role=\"alert\">'\n            + response.message\n            + '</div>'\n        );\n\n        setTimeout(function () {\n            $('.add-to-basket-alert').remove();\n        }, 5000);\n    }\n}\n\n/**\n * Retrieves the bundle product item ID's for the Controller to replace bundle master product\n * items with their selected variants\n *\n * @return {string[]} - List of selected bundle product item ID's\n */\nfunction getChildProducts() {\n    var childProducts = [];\n    $('.bundle-item').each(function () {\n        childProducts.push({\n            pid: $(this).find('.product-id').text(),\n            quantity: parseInt($(this).find('label.quantity').data('quantity'), 10)\n        });\n    });\n\n    return childProducts.length ? JSON.stringify(childProducts) : [];\n}\n\n/**\n * Retrieve product options\n *\n * @param {jQuery} $productContainer - DOM element for current product\n * @return {string} - Product options and their selected values\n */\nfunction getOptions($productContainer) {\n    var options = $productContainer\n        .find('.product-option')\n        .map(function () {\n            var $elOption = $(this).find('.options-select');\n            var urlValue = $elOption.val();\n            var selectedValueId = $elOption.find('option[value=\"' + urlValue + '\"]')\n                .data('value-id');\n            return {\n                optionId: $(this).data('option-id'),\n                selectedValueId: selectedValueId\n            };\n        }).toArray();\n\n    return JSON.stringify(options);\n}\n\n/**\n * Makes a call to the server to report the event of adding an item to the cart\n *\n * @param {string | boolean} url - a string representing the end point to hit so that the event can be recorded, or false\n */\nfunction miniCartReportingUrl(url) {\n    if (url) {\n        $.ajax({\n            url: url,\n            method: 'GET',\n            success: function () {\n                // reporting urls hit on the server\n            },\n            error: function () {\n                // no reporting urls hit on the server\n            }\n        });\n    }\n}\n\nmodule.exports = {\n    attributeSelect: attributeSelect,\n    methods: {\n        editBonusProducts: function (data) {\n            chooseBonusProducts(data);\n        }\n    },\n\n    focusChooseBonusProductModal: function () {\n        $('body').on('shown.bs.modal', '#chooseBonusProductModal', function () {\n            $('#chooseBonusProductModal').siblings().attr('aria-hidden', 'true');\n            $('#chooseBonusProductModal .close').focus();\n        });\n    },\n\n    onClosingChooseBonusProductModal: function () {\n        $('body').on('hidden.bs.modal', '#chooseBonusProductModal', function () {\n            $('#chooseBonusProductModal').siblings().attr('aria-hidden', 'false');\n        });\n    },\n\n    trapChooseBonusProductModalFocus: function () {\n        $('body').on('keydown', '#chooseBonusProductModal', function (e) {\n            var focusParams = {\n                event: e,\n                containerSelector: '#chooseBonusProductModal',\n                firstElementSelector: '.close',\n                lastElementSelector: '.add-bonus-products'\n            };\n            focusHelper.setTabNextFocus(focusParams);\n        });\n    },\n\n    colorAttribute: function () {\n        $(document).on('click', '[data-attr=\"color\"] button', function (e) {\n            e.preventDefault();\n\n            if ($(this).attr('disabled')) {\n                return;\n            }\n            var $productContainer = $(this).closest('.set-item');\n            if (!$productContainer.length) {\n                $productContainer = $(this).closest('.product-detail');\n            }\n\n            attributeSelect($(this).attr('data-url'), $productContainer);\n        });\n    },\n\n    selectAttribute: function () {\n        $(document).on('change', 'select[class*=\"select-\"], .options-select', function (e) {\n            e.preventDefault();\n\n            var $productContainer = $(this).closest('.set-item');\n            if (!$productContainer.length) {\n                $productContainer = $(this).closest('.product-detail');\n            }\n            attributeSelect(e.currentTarget.value, $productContainer);\n        });\n    },\n\n    availability: function () {\n        $(document).on('change', '.quantity-select', function (e) {\n            e.preventDefault();\n\n            var $productContainer = $(this).closest('.product-detail');\n            if (!$productContainer.length) {\n                $productContainer = $(this).closest('.modal-content').find('.product-quickview');\n            }\n\n            if ($('.bundle-items', $productContainer).length === 0) {\n                attributeSelect($(e.currentTarget).find('option:selected').data('url'),\n                    $productContainer);\n            }\n        });\n    },\n\n    addToCart: function () {\n        $(document).on('click', 'button.add-to-cart, button.add-to-cart-global', function () {\n            var addToCartUrl;\n            var pid;\n            var pidsObj;\n            var setPids;\n\n            $('body').trigger('product:beforeAddToCart', this);\n\n            if ($('.set-items').length && $(this).hasClass('add-to-cart-global')) {\n                setPids = [];\n\n                $('.product-detail').each(function () {\n                    if (!$(this).hasClass('product-set-detail')) {\n                        setPids.push({\n                            pid: $(this).find('.product-id').text(),\n                            qty: $(this).find('.quantity-select').val(),\n                            options: getOptions($(this))\n                        });\n                    }\n                });\n                pidsObj = JSON.stringify(setPids);\n            }\n\n            pid = getPidValue($(this));\n\n            var $productContainer = $(this).closest('.product-detail');\n            if (!$productContainer.length) {\n                $productContainer = $(this).closest('.quick-view-dialog').find('.product-detail');\n            }\n\n            addToCartUrl = getAddToCartUrl();\n\n            var form = {\n                pid: pid,\n                pidsObj: pidsObj,\n                childProducts: getChildProducts(),\n                quantity: getQuantitySelected($(this))\n            };\n\n            if (!$('.bundle-item').length) {\n                form.options = getOptions($productContainer);\n            }\n\n            $(this).trigger('updateAddToCartFormData', form);\n            if (addToCartUrl) {\n                $.ajax({\n                    url: addToCartUrl,\n                    method: 'POST',\n                    data: form,\n                    success: function (data) {\n                        handlePostCartAdd(data);\n                        $('body').trigger('product:afterAddToCart', data);\n                        $.spinner().stop();\n                        miniCartReportingUrl(data.reportingURL);\n                    },\n                    error: function () {\n                        $.spinner().stop();\n                    }\n                });\n            }\n        });\n    },\n    selectBonusProduct: function () {\n        $(document).on('click', '.select-bonus-product', function () {\n            var $choiceOfBonusProduct = $(this).parents('.choice-of-bonus-product');\n            var pid = $(this).data('pid');\n            var maxPids = $('.choose-bonus-product-dialog').data('total-qty');\n            var submittedQty = parseInt($choiceOfBonusProduct.find('.bonus-quantity-select').val(), 10);\n            var totalQty = 0;\n            $.each($('#chooseBonusProductModal .selected-bonus-products .selected-pid'), function () {\n                totalQty += $(this).data('qty');\n            });\n            totalQty += submittedQty;\n            var optionID = $choiceOfBonusProduct.find('.product-option').data('option-id');\n            var valueId = $choiceOfBonusProduct.find('.options-select option:selected').data('valueId');\n            if (totalQty <= maxPids) {\n                var selectedBonusProductHtml = ''\n                + '<div class=\"selected-pid row\" '\n                + 'data-pid=\"' + pid + '\"'\n                + 'data-qty=\"' + submittedQty + '\"'\n                + 'data-optionID=\"' + (optionID || '') + '\"'\n                + 'data-option-selected-value=\"' + (valueId || '') + '\"'\n                + '>'\n                + '<div class=\"col-sm-11 col-9 bonus-product-name\" >'\n                + $choiceOfBonusProduct.find('.product-name').html()\n                + '</div>'\n                + '<div class=\"col-1\"><i class=\"fa fa-times\" aria-hidden=\"true\"></i></div>'\n                + '</div>'\n                ;\n                $('#chooseBonusProductModal .selected-bonus-products').append(selectedBonusProductHtml);\n                $('.pre-cart-products').html(totalQty);\n                $('.selected-bonus-products .bonus-summary').removeClass('alert-danger');\n            } else {\n                $('.selected-bonus-products .bonus-summary').addClass('alert-danger');\n            }\n        });\n    },\n    removeBonusProduct: function () {\n        $(document).on('click', '.selected-pid', function () {\n            $(this).remove();\n            var $selected = $('#chooseBonusProductModal .selected-bonus-products .selected-pid');\n            var count = 0;\n            if ($selected.length) {\n                $selected.each(function () {\n                    count += parseInt($(this).data('qty'), 10);\n                });\n            }\n\n            $('.pre-cart-products').html(count);\n            $('.selected-bonus-products .bonus-summary').removeClass('alert-danger');\n        });\n    },\n    enableBonusProductSelection: function () {\n        $('body').on('bonusproduct:updateSelectButton', function (e, response) {\n            $('button.select-bonus-product', response.$productContainer).attr('disabled',\n                (!response.product.readyToOrder || !response.product.available));\n            var pid = response.product.id;\n            $('button.select-bonus-product', response.$productContainer).data('pid', pid);\n        });\n    },\n    showMoreBonusProducts: function () {\n        $(document).on('click', '.show-more-bonus-products', function () {\n            var url = $(this).data('url');\n            $('.modal-content').spinner().start();\n            $.ajax({\n                url: url,\n                method: 'GET',\n                success: function (html) {\n                    var parsedHtml = parseHtml(html);\n                    $('.modal-body').append(parsedHtml.body);\n                    $('.show-more-bonus-products:first').remove();\n                    $('.modal-content').spinner().stop();\n                },\n                error: function () {\n                    $('.modal-content').spinner().stop();\n                }\n            });\n        });\n    },\n    addBonusProductsToCart: function () {\n        $(document).on('click', '.add-bonus-products', function () {\n            var $readyToOrderBonusProducts = $('.choose-bonus-product-dialog .selected-pid');\n            var queryString = '?pids=';\n            var url = $('.choose-bonus-product-dialog').data('addtocarturl');\n            var pidsObject = {\n                bonusProducts: []\n            };\n\n            $.each($readyToOrderBonusProducts, function () {\n                var qtyOption =\n                    parseInt($(this)\n                        .data('qty'), 10);\n\n                var option = null;\n                if (qtyOption > 0) {\n                    if ($(this).data('optionid') && $(this).data('option-selected-value')) {\n                        option = {};\n                        option.optionId = $(this).data('optionid');\n                        option.productId = $(this).data('pid');\n                        option.selectedValueId = $(this).data('option-selected-value');\n                    }\n                    pidsObject.bonusProducts.push({\n                        pid: $(this).data('pid'),\n                        qty: qtyOption,\n                        options: [option]\n                    });\n                    pidsObject.totalQty = parseInt($('.pre-cart-products').html(), 10);\n                }\n            });\n            queryString += JSON.stringify(pidsObject);\n            queryString = queryString + '&uuid=' + $('.choose-bonus-product-dialog').data('uuid');\n            queryString = queryString + '&pliuuid=' + $('.choose-bonus-product-dialog').data('pliuuid');\n            $.spinner().start();\n            $.ajax({\n                url: url + queryString,\n                method: 'POST',\n                success: function (data) {\n                    $.spinner().stop();\n                    if (data.error) {\n                        $('#chooseBonusProductModal').modal('hide');\n                        if ($('.add-to-cart-messages').length === 0) {\n                            $('body').append('<div class=\"add-to-cart-messages\"></div>');\n                        }\n                        $('.add-to-cart-messages').append(\n                            '<div class=\"alert alert-danger add-to-basket-alert text-center\"'\n                            + ' role=\"alert\">'\n                            + data.errorMessage + '</div>'\n                        );\n                        setTimeout(function () {\n                            $('.add-to-basket-alert').remove();\n                        }, 3000);\n                    } else {\n                        $('.configure-bonus-product-attributes').html(data);\n                        $('.bonus-products-step2').removeClass('hidden-xl-down');\n                        $('#chooseBonusProductModal').modal('hide');\n\n                        if ($('.add-to-cart-messages').length === 0) {\n                            $('body').append('<div class=\"add-to-cart-messages\"></div>');\n                        }\n                        $('.minicart-quantity').html(data.totalQty);\n                        $('.add-to-cart-messages').append(\n                            '<div class=\"alert alert-success add-to-basket-alert text-center\"'\n                            + ' role=\"alert\">'\n                            + data.msgSuccess + '</div>'\n                        );\n                        setTimeout(function () {\n                            $('.add-to-basket-alert').remove();\n                            if ($('.cart-page').length) {\n                                location.reload();\n                            }\n                        }, 1500);\n                    }\n                },\n                error: function () {\n                    $.spinner().stop();\n                }\n            });\n        });\n    },\n\n    getPidValue: getPidValue,\n    getQuantitySelected: getQuantitySelected,\n    miniCartReportingUrl: miniCartReportingUrl\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jYXJ0cmlkZ2VzL2FwcF9zdG9yZWZyb250X2Jhc2UvY2FydHJpZGdlL2NsaWVudC9kZWZhdWx0L2pzL3Byb2R1Y3QvYmFzZS5qcz9iOWExIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhO0FBQ2Isa0JBQWtCLG1CQUFPLENBQUMsNkdBQXFCOztBQUUvQztBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFlBQVksT0FBTztBQUNuQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixZQUFZLE9BQU87QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsWUFBWSxPQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLE9BQU87QUFDbEIsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsT0FBTztBQUNsQixXQUFXLE9BQU87QUFDbEIsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLE9BQU87QUFDbEIsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsT0FBTztBQUNsQixXQUFXLE9BQU87QUFDbEIsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLE9BQU87QUFDbEIsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE1BQU07QUFDakIsWUFBWSxPQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLE9BQU87QUFDckIsY0FBYyxPQUFPO0FBQ3JCOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsT0FBTztBQUNyQixjQUFjLE9BQU87QUFDckIsY0FBYyxPQUFPO0FBQ3JCLGNBQWMscUJBQXFCO0FBQ25DOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsd0JBQXdCO0FBQ25DLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEIsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixpQkFBaUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsT0FBTztBQUNsQixXQUFXLE9BQU87QUFDbEIsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsU0FBUztBQUNwQixXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsY0FBYyxRQUFRO0FBQ3RCLGNBQWMsT0FBTztBQUNyQixjQUFjLE9BQU87QUFDckI7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxrQkFBa0I7QUFDN0IsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxzREFBc0Q7O0FBRW5FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsMkNBQTJDO0FBQ2hFO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVksT0FBTztBQUNuQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0EsWUFBWSxPQUFPO0FBQ25CO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLFlBQVk7QUFDWjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQ7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxTQUFTO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsWUFBWSxPQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsaUJBQWlCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVM7QUFDVCxLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7O0FBRUw7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QixxQkFBcUI7QUFDckI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVCxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6Ii4vY2FydHJpZGdlcy9hcHBfc3RvcmVmcm9udF9iYXNlL2NhcnRyaWRnZS9jbGllbnQvZGVmYXVsdC9qcy9wcm9kdWN0L2Jhc2UuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG52YXIgZm9jdXNIZWxwZXIgPSByZXF1aXJlKCcuLi9jb21wb25lbnRzL2ZvY3VzJyk7XG5cbi8qKlxuICogUmV0cmlldmVzIHRoZSByZWxldmFudCBwaWQgdmFsdWVcbiAqIEBwYXJhbSB7anF1ZXJ5fSAkZWwgLSBET00gY29udGFpbmVyIGZvciBhIGdpdmVuIGFkZCB0byBjYXJ0IGJ1dHRvblxuICogQHJldHVybiB7c3RyaW5nfSAtIHZhbHVlIHRvIGJlIHVzZWQgd2hlbiBhZGRpbmcgcHJvZHVjdCB0byBjYXJ0XG4gKi9cbmZ1bmN0aW9uIGdldFBpZFZhbHVlKCRlbCkge1xuICAgIHZhciBwaWQ7XG5cbiAgICBpZiAoJCgnI3F1aWNrVmlld01vZGFsJykuaGFzQ2xhc3MoJ3Nob3cnKSAmJiAhJCgnLnByb2R1Y3Qtc2V0JykubGVuZ3RoKSB7XG4gICAgICAgIHBpZCA9ICQoJGVsKS5jbG9zZXN0KCcubW9kYWwtY29udGVudCcpLmZpbmQoJy5wcm9kdWN0LXF1aWNrdmlldycpLmRhdGEoJ3BpZCcpO1xuICAgIH0gZWxzZSBpZiAoJCgnLnByb2R1Y3Qtc2V0LWRldGFpbCcpLmxlbmd0aCB8fCAkKCcucHJvZHVjdC1zZXQnKS5sZW5ndGgpIHtcbiAgICAgICAgcGlkID0gJCgkZWwpLmNsb3Nlc3QoJy5wcm9kdWN0LWRldGFpbCcpLmZpbmQoJy5wcm9kdWN0LWlkJykudGV4dCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHBpZCA9ICQoJy5wcm9kdWN0LWRldGFpbDpub3QoXCIuYnVuZGxlLWl0ZW1cIiknKS5kYXRhKCdwaWQnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGlkO1xufVxuXG4vKipcbiAqIFJldHJpZXZlIGNvbnRleHR1YWwgcXVhbnRpdHkgc2VsZWN0b3JcbiAqIEBwYXJhbSB7anF1ZXJ5fSAkZWwgLSBET00gY29udGFpbmVyIGZvciB0aGUgcmVsZXZhbnQgcXVhbnRpdHlcbiAqIEByZXR1cm4ge2pxdWVyeX0gLSBxdWFudGl0eSBzZWxlY3RvciBET00gY29udGFpbmVyXG4gKi9cbmZ1bmN0aW9uIGdldFF1YW50aXR5U2VsZWN0b3IoJGVsKSB7XG4gICAgcmV0dXJuICRlbCAmJiAkKCcuc2V0LWl0ZW1zJykubGVuZ3RoXG4gICAgICAgID8gJCgkZWwpLmNsb3Nlc3QoJy5wcm9kdWN0LWRldGFpbCcpLmZpbmQoJy5xdWFudGl0eS1zZWxlY3QnKVxuICAgICAgICA6ICQoJy5xdWFudGl0eS1zZWxlY3QnKTtcbn1cblxuLyoqXG4gKiBSZXRyaWV2ZXMgdGhlIHZhbHVlIGFzc29jaWF0ZWQgd2l0aCB0aGUgUXVhbnRpdHkgcHVsbC1kb3duIG1lbnVcbiAqIEBwYXJhbSB7anF1ZXJ5fSAkZWwgLSBET00gY29udGFpbmVyIGZvciB0aGUgcmVsZXZhbnQgcXVhbnRpdHlcbiAqIEByZXR1cm4ge3N0cmluZ30gLSB2YWx1ZSBmb3VuZCBpbiB0aGUgcXVhbnRpdHkgaW5wdXRcbiAqL1xuZnVuY3Rpb24gZ2V0UXVhbnRpdHlTZWxlY3RlZCgkZWwpIHtcbiAgICByZXR1cm4gZ2V0UXVhbnRpdHlTZWxlY3RvcigkZWwpLnZhbCgpO1xufVxuXG4vKipcbiAqIFByb2Nlc3MgdGhlIGF0dHJpYnV0ZSB2YWx1ZXMgZm9yIGFuIGF0dHJpYnV0ZSB0aGF0IGhhcyBpbWFnZSBzd2F0Y2hlc1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhdHRyIC0gQXR0cmlidXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gYXR0ci5pZCAtIEF0dHJpYnV0ZSBJRFxuICogQHBhcmFtIHtPYmplY3RbXX0gYXR0ci52YWx1ZXMgLSBBcnJheSBvZiBhdHRyaWJ1dGUgdmFsdWUgb2JqZWN0c1xuICogQHBhcmFtIHtzdHJpbmd9IGF0dHIudmFsdWVzLnZhbHVlIC0gQXR0cmlidXRlIGNvZGVkIHZhbHVlXG4gKiBAcGFyYW0ge3N0cmluZ30gYXR0ci52YWx1ZXMudXJsIC0gVVJMIHRvIGRlL3NlbGVjdCBhbiBhdHRyaWJ1dGUgdmFsdWUgb2YgdGhlIHByb2R1Y3RcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gYXR0ci52YWx1ZXMuaXNTZWxlY3RhYmxlIC0gRmxhZyBhcyB0byB3aGV0aGVyIGFuIGF0dHJpYnV0ZSB2YWx1ZSBjYW4gYmVcbiAqICAgICBzZWxlY3RlZC4gIElmIHRoZXJlIGlzIG5vIHZhcmlhbnQgdGhhdCBjb3JyZXNwb25kcyB0byBhIHNwZWNpZmljIGNvbWJpbmF0aW9uIG9mIGF0dHJpYnV0ZVxuICogICAgIHZhbHVlcywgYW4gYXR0cmlidXRlIG1heSBiZSBkaXNhYmxlZCBpbiB0aGUgUHJvZHVjdCBEZXRhaWwgUGFnZVxuICogQHBhcmFtIHtqUXVlcnl9ICRwcm9kdWN0Q29udGFpbmVyIC0gRE9NIGNvbnRhaW5lciBmb3IgYSBnaXZlbiBwcm9kdWN0XG4gKiBAcGFyYW0ge09iamVjdH0gbXNncyAtIG9iamVjdCBjb250YWluaW5nIHJlc291cmNlIG1lc3NhZ2VzXG4gKi9cbmZ1bmN0aW9uIHByb2Nlc3NTd2F0Y2hWYWx1ZXMoYXR0ciwgJHByb2R1Y3RDb250YWluZXIsIG1zZ3MpIHtcbiAgICBhdHRyLnZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uIChhdHRyVmFsdWUpIHtcbiAgICAgICAgdmFyICRhdHRyVmFsdWUgPSAkcHJvZHVjdENvbnRhaW5lci5maW5kKCdbZGF0YS1hdHRyPVwiJyArIGF0dHIuaWQgKyAnXCJdIFtkYXRhLWF0dHItdmFsdWU9XCInICtcbiAgICAgICAgICAgIGF0dHJWYWx1ZS52YWx1ZSArICdcIl0nKTtcbiAgICAgICAgdmFyICRzd2F0Y2hCdXR0b24gPSAkYXR0clZhbHVlLnBhcmVudCgpO1xuXG4gICAgICAgIGlmIChhdHRyVmFsdWUuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICRhdHRyVmFsdWUuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAkYXR0clZhbHVlLnNpYmxpbmdzKCcuc2VsZWN0ZWQtYXNzaXN0aXZlLXRleHQnKS50ZXh0KG1zZ3MuYXNzaXN0aXZlU2VsZWN0ZWRUZXh0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRhdHRyVmFsdWUucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAkYXR0clZhbHVlLnNpYmxpbmdzKCcuc2VsZWN0ZWQtYXNzaXN0aXZlLXRleHQnKS5lbXB0eSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGF0dHJWYWx1ZS51cmwpIHtcbiAgICAgICAgICAgICRzd2F0Y2hCdXR0b24uYXR0cignZGF0YS11cmwnLCBhdHRyVmFsdWUudXJsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRzd2F0Y2hCdXR0b24ucmVtb3ZlQXR0cignZGF0YS11cmwnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERpc2FibGUgaWYgbm90IHNlbGVjdGFibGVcbiAgICAgICAgJGF0dHJWYWx1ZS5yZW1vdmVDbGFzcygnc2VsZWN0YWJsZSB1bnNlbGVjdGFibGUnKTtcblxuICAgICAgICAkYXR0clZhbHVlLmFkZENsYXNzKGF0dHJWYWx1ZS5zZWxlY3RhYmxlID8gJ3NlbGVjdGFibGUnIDogJ3Vuc2VsZWN0YWJsZScpO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIFByb2Nlc3MgYXR0cmlidXRlIHZhbHVlcyBhc3NvY2lhdGVkIHdpdGggYW4gYXR0cmlidXRlIHRoYXQgZG9lcyBub3QgaGF2ZSBpbWFnZSBzd2F0Y2hlc1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhdHRyIC0gQXR0cmlidXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gYXR0ci5pZCAtIEF0dHJpYnV0ZSBJRFxuICogQHBhcmFtIHtPYmplY3RbXX0gYXR0ci52YWx1ZXMgLSBBcnJheSBvZiBhdHRyaWJ1dGUgdmFsdWUgb2JqZWN0c1xuICogQHBhcmFtIHtzdHJpbmd9IGF0dHIudmFsdWVzLnZhbHVlIC0gQXR0cmlidXRlIGNvZGVkIHZhbHVlXG4gKiBAcGFyYW0ge3N0cmluZ30gYXR0ci52YWx1ZXMudXJsIC0gVVJMIHRvIGRlL3NlbGVjdCBhbiBhdHRyaWJ1dGUgdmFsdWUgb2YgdGhlIHByb2R1Y3RcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gYXR0ci52YWx1ZXMuaXNTZWxlY3RhYmxlIC0gRmxhZyBhcyB0byB3aGV0aGVyIGFuIGF0dHJpYnV0ZSB2YWx1ZSBjYW4gYmVcbiAqICAgICBzZWxlY3RlZC4gIElmIHRoZXJlIGlzIG5vIHZhcmlhbnQgdGhhdCBjb3JyZXNwb25kcyB0byBhIHNwZWNpZmljIGNvbWJpbmF0aW9uIG9mIGF0dHJpYnV0ZVxuICogICAgIHZhbHVlcywgYW4gYXR0cmlidXRlIG1heSBiZSBkaXNhYmxlZCBpbiB0aGUgUHJvZHVjdCBEZXRhaWwgUGFnZVxuICogQHBhcmFtIHtqUXVlcnl9ICRwcm9kdWN0Q29udGFpbmVyIC0gRE9NIGNvbnRhaW5lciBmb3IgYSBnaXZlbiBwcm9kdWN0XG4gKi9cbmZ1bmN0aW9uIHByb2Nlc3NOb25Td2F0Y2hWYWx1ZXMoYXR0ciwgJHByb2R1Y3RDb250YWluZXIpIHtcbiAgICB2YXIgJGF0dHIgPSAnW2RhdGEtYXR0cj1cIicgKyBhdHRyLmlkICsgJ1wiXSc7XG4gICAgdmFyICRkZWZhdWx0T3B0aW9uID0gJHByb2R1Y3RDb250YWluZXIuZmluZCgkYXR0ciArICcgLnNlbGVjdC0nICsgYXR0ci5pZCArICcgb3B0aW9uOmZpcnN0Jyk7XG4gICAgJGRlZmF1bHRPcHRpb24uYXR0cigndmFsdWUnLCBhdHRyLnJlc2V0VXJsKTtcblxuICAgIGF0dHIudmFsdWVzLmZvckVhY2goZnVuY3Rpb24gKGF0dHJWYWx1ZSkge1xuICAgICAgICB2YXIgJGF0dHJWYWx1ZSA9ICRwcm9kdWN0Q29udGFpbmVyXG4gICAgICAgICAgICAuZmluZCgkYXR0ciArICcgW2RhdGEtYXR0ci12YWx1ZT1cIicgKyBhdHRyVmFsdWUudmFsdWUgKyAnXCJdJyk7XG4gICAgICAgICRhdHRyVmFsdWUuYXR0cigndmFsdWUnLCBhdHRyVmFsdWUudXJsKVxuICAgICAgICAgICAgLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XG5cbiAgICAgICAgaWYgKCFhdHRyVmFsdWUuc2VsZWN0YWJsZSkge1xuICAgICAgICAgICAgJGF0dHJWYWx1ZS5hdHRyKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbi8qKlxuICogUm91dGVzIHRoZSBoYW5kbGluZyBvZiBhdHRyaWJ1dGUgcHJvY2Vzc2luZyBkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgYXR0cmlidXRlIGhhcyBpbWFnZVxuICogICAgIHN3YXRjaGVzIG9yIG5vdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhdHRycyAtIEF0dHJpYnV0ZVxuICogQHBhcmFtIHtzdHJpbmd9IGF0dHIuaWQgLSBBdHRyaWJ1dGUgSURcbiAqIEBwYXJhbSB7alF1ZXJ5fSAkcHJvZHVjdENvbnRhaW5lciAtIERPTSBlbGVtZW50IGZvciBhIGdpdmVuIHByb2R1Y3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBtc2dzIC0gb2JqZWN0IGNvbnRhaW5pbmcgcmVzb3VyY2UgbWVzc2FnZXNcbiAqL1xuZnVuY3Rpb24gdXBkYXRlQXR0cnMoYXR0cnMsICRwcm9kdWN0Q29udGFpbmVyLCBtc2dzKSB7XG4gICAgLy8gQ3VycmVudGx5LCB0aGUgb25seSBhdHRyaWJ1dGUgdHlwZSB0aGF0IGhhcyBpbWFnZSBzd2F0Y2hlcyBpcyBDb2xvci5cbiAgICB2YXIgYXR0cnNXaXRoU3dhdGNoZXMgPSBbJ2NvbG9yJ107XG5cbiAgICBhdHRycy5mb3JFYWNoKGZ1bmN0aW9uIChhdHRyKSB7XG4gICAgICAgIGlmIChhdHRyc1dpdGhTd2F0Y2hlcy5pbmRleE9mKGF0dHIuaWQpID4gLTEpIHtcbiAgICAgICAgICAgIHByb2Nlc3NTd2F0Y2hWYWx1ZXMoYXR0ciwgJHByb2R1Y3RDb250YWluZXIsIG1zZ3MpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJvY2Vzc05vblN3YXRjaFZhbHVlcyhhdHRyLCAkcHJvZHVjdENvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuLyoqXG4gKiBVcGRhdGVzIHRoZSBhdmFpbGFiaWxpdHkgc3RhdHVzIGluIHRoZSBQcm9kdWN0IERldGFpbCBQYWdlXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHJlc3BvbnNlIC0gQWpheCByZXNwb25zZSBvYmplY3QgYWZ0ZXIgYW5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZSB2YWx1ZSBoYXMgYmVlbiBbZGVdc2VsZWN0ZWRcbiAqIEBwYXJhbSB7alF1ZXJ5fSAkcHJvZHVjdENvbnRhaW5lciAtIERPTSBlbGVtZW50IGZvciBhIGdpdmVuIHByb2R1Y3RcbiAqL1xuZnVuY3Rpb24gdXBkYXRlQXZhaWxhYmlsaXR5KHJlc3BvbnNlLCAkcHJvZHVjdENvbnRhaW5lcikge1xuICAgIHZhciBhdmFpbGFiaWxpdHlWYWx1ZSA9ICcnO1xuICAgIHZhciBhdmFpbGFiaWxpdHlNZXNzYWdlcyA9IHJlc3BvbnNlLnByb2R1Y3QuYXZhaWxhYmlsaXR5Lm1lc3NhZ2VzO1xuICAgIGlmICghcmVzcG9uc2UucHJvZHVjdC5yZWFkeVRvT3JkZXIpIHtcbiAgICAgICAgYXZhaWxhYmlsaXR5VmFsdWUgPSAnPGxpPjxkaXY+JyArIHJlc3BvbnNlLnJlc291cmNlcy5pbmZvX3NlbGVjdGZvcnN0b2NrICsgJzwvZGl2PjwvbGk+JztcbiAgICB9IGVsc2Uge1xuICAgICAgICBhdmFpbGFiaWxpdHlNZXNzYWdlcy5mb3JFYWNoKGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICBhdmFpbGFiaWxpdHlWYWx1ZSArPSAnPGxpPjxkaXY+JyArIG1lc3NhZ2UgKyAnPC9kaXY+PC9saT4nO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAkKCRwcm9kdWN0Q29udGFpbmVyKS50cmlnZ2VyKCdwcm9kdWN0OnVwZGF0ZUF2YWlsYWJpbGl0eScsIHtcbiAgICAgICAgcHJvZHVjdDogcmVzcG9uc2UucHJvZHVjdCxcbiAgICAgICAgJHByb2R1Y3RDb250YWluZXI6ICRwcm9kdWN0Q29udGFpbmVyLFxuICAgICAgICBtZXNzYWdlOiBhdmFpbGFiaWxpdHlWYWx1ZSxcbiAgICAgICAgcmVzb3VyY2VzOiByZXNwb25zZS5yZXNvdXJjZXNcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZXMgaHRtbCBmb3IgcHJvZHVjdCBhdHRyaWJ1dGVzIHNlY3Rpb25cbiAqXG4gKiBAcGFyYW0ge2FycmF5fSBhdHRyaWJ1dGVzIC0gbGlzdCBvZiBhdHRyaWJ1dGVzXG4gKiBAcmV0dXJuIHtzdHJpbmd9IC0gQ29tcGlsZWQgSFRNTFxuICovXG5mdW5jdGlvbiBnZXRBdHRyaWJ1dGVzSHRtbChhdHRyaWJ1dGVzKSB7XG4gICAgaWYgKCFhdHRyaWJ1dGVzKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICB2YXIgaHRtbCA9ICcnO1xuXG4gICAgYXR0cmlidXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChhdHRyaWJ1dGVHcm91cCkge1xuICAgICAgICBpZiAoYXR0cmlidXRlR3JvdXAuSUQgPT09ICdtYWluQXR0cmlidXRlcycpIHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZUdyb3VwLmF0dHJpYnV0ZXMuZm9yRWFjaChmdW5jdGlvbiAoYXR0cmlidXRlKSB7XG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cImF0dHJpYnV0ZS12YWx1ZXNcIj4nICsgYXR0cmlidXRlLmxhYmVsICsgJzogJ1xuICAgICAgICAgICAgICAgICAgICArIGF0dHJpYnV0ZS52YWx1ZSArICc8L2Rpdj4nO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBodG1sO1xufVxuXG4vKipcbiAqIEB0eXBlZGVmIFVwZGF0ZWRPcHRpb25WYWx1ZVxuICogQHR5cGUgT2JqZWN0XG4gKiBAcHJvcGVydHkge3N0cmluZ30gaWQgLSBPcHRpb24gdmFsdWUgSUQgZm9yIGxvb2sgdXBcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB1cmwgLSBVcGRhdGVkIG9wdGlvbiB2YWx1ZSBzZWxlY3Rpb24gVVJMXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiBPcHRpb25TZWxlY3Rpb25SZXNwb25zZVxuICogQHR5cGUgT2JqZWN0XG4gKiBAcHJvcGVydHkge3N0cmluZ30gcHJpY2VIdG1sIC0gVXBkYXRlZCBwcmljZSBIVE1MIGNvZGVcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBvcHRpb25zIC0gVXBkYXRlZCBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gb3B0aW9ucy5pZCAtIE9wdGlvbiBJRFxuICogQHByb3BlcnR5IHtVcGRhdGVkT3B0aW9uVmFsdWVbXX0gb3B0aW9ucy52YWx1ZXMgLSBPcHRpb24gdmFsdWVzXG4gKi9cblxuLyoqXG4gKiBVcGRhdGVzIERPTSB1c2luZyBwb3N0LW9wdGlvbiBzZWxlY3Rpb24gQWpheCByZXNwb25zZVxuICpcbiAqIEBwYXJhbSB7T3B0aW9uU2VsZWN0aW9uUmVzcG9uc2V9IG9wdGlvbnNIdG1sIC0gQWpheCByZXNwb25zZSBvcHRpb25zSHRtbCBmcm9tIHNlbGVjdGluZyBhIHByb2R1Y3Qgb3B0aW9uXG4gKiBAcGFyYW0ge2pRdWVyeX0gJHByb2R1Y3RDb250YWluZXIgLSBET00gZWxlbWVudCBmb3IgY3VycmVudCBwcm9kdWN0XG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZU9wdGlvbnMob3B0aW9uc0h0bWwsICRwcm9kdWN0Q29udGFpbmVyKSB7XG5cdC8vIFVwZGF0ZSBvcHRpb25zXG4gICAgJHByb2R1Y3RDb250YWluZXIuZmluZCgnLnByb2R1Y3Qtb3B0aW9ucycpLmVtcHR5KCkuaHRtbChvcHRpb25zSHRtbCk7XG59XG5cbi8qKlxuICogRHluYW1pY2FsbHkgY3JlYXRlcyBCb290c3RyYXAgY2Fyb3VzZWwgZnJvbSByZXNwb25zZSBjb250YWluaW5nIGltYWdlc1xuICogQHBhcmFtIHtPYmplY3RbXX0gaW1ncyAtIEFycmF5IG9mIGxhcmdlIHByb2R1Y3QgaW1hZ2VzLGFsb25nIHdpdGggcmVsYXRlZCBpbmZvcm1hdGlvblxuICogQHBhcmFtIHtqUXVlcnl9ICRwcm9kdWN0Q29udGFpbmVyIC0gRE9NIGVsZW1lbnQgZm9yIGEgZ2l2ZW4gcHJvZHVjdFxuICovXG5mdW5jdGlvbiBjcmVhdGVDYXJvdXNlbChpbWdzLCAkcHJvZHVjdENvbnRhaW5lcikge1xuICAgIHZhciBjYXJvdXNlbCA9ICRwcm9kdWN0Q29udGFpbmVyLmZpbmQoJy5jYXJvdXNlbCcpO1xuICAgICQoY2Fyb3VzZWwpLmNhcm91c2VsKCdkaXNwb3NlJyk7XG4gICAgdmFyIGNhcm91c2VsSWQgPSAkKGNhcm91c2VsKS5hdHRyKCdpZCcpO1xuICAgICQoY2Fyb3VzZWwpLmVtcHR5KCkuYXBwZW5kKCc8b2wgY2xhc3M9XCJjYXJvdXNlbC1pbmRpY2F0b3JzXCI+PC9vbD48ZGl2IGNsYXNzPVwiY2Fyb3VzZWwtaW5uZXJcIiByb2xlPVwibGlzdGJveFwiPjwvZGl2PjxhIGNsYXNzPVwiY2Fyb3VzZWwtY29udHJvbC1wcmV2XCIgaHJlZj1cIiMnICsgY2Fyb3VzZWxJZCArICdcIiByb2xlPVwiYnV0dG9uXCIgZGF0YS1zbGlkZT1cInByZXZcIj48c3BhbiBjbGFzcz1cImZhIGljb24tcHJldlwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cInNyLW9ubHlcIj4nICsgJChjYXJvdXNlbCkuZGF0YSgncHJldicpICsgJzwvc3Bhbj48L2E+PGEgY2xhc3M9XCJjYXJvdXNlbC1jb250cm9sLW5leHRcIiBocmVmPVwiIycgKyBjYXJvdXNlbElkICsgJ1wiIHJvbGU9XCJidXR0b25cIiBkYXRhLXNsaWRlPVwibmV4dFwiPjxzcGFuIGNsYXNzPVwiZmEgaWNvbi1uZXh0XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwic3Itb25seVwiPicgKyAkKGNhcm91c2VsKS5kYXRhKCduZXh0JykgKyAnPC9zcGFuPjwvYT4nKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGltZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgJCgnPGRpdiBjbGFzcz1cImNhcm91c2VsLWl0ZW1cIj48aW1nIHNyYz1cIicgKyBpbWdzW2ldLnVybCArICdcIiBjbGFzcz1cImQtYmxvY2sgaW1nLWZsdWlkXCIgYWx0PVwiJyArIGltZ3NbaV0uYWx0ICsgJyBpbWFnZSBudW1iZXIgJyArIHBhcnNlSW50KGltZ3NbaV0uaW5kZXgsIDEwKSArICdcIiB0aXRsZT1cIicgKyBpbWdzW2ldLnRpdGxlICsgJ1wiIGl0ZW1wcm9wPVwiaW1hZ2VcIiAvPjwvZGl2PicpLmFwcGVuZFRvKCQoY2Fyb3VzZWwpLmZpbmQoJy5jYXJvdXNlbC1pbm5lcicpKTtcbiAgICAgICAgJCgnPGxpIGRhdGEtdGFyZ2V0PVwiIycgKyBjYXJvdXNlbElkICsgJ1wiIGRhdGEtc2xpZGUtdG89XCInICsgaSArICdcIiBjbGFzcz1cIlwiPjwvbGk+JykuYXBwZW5kVG8oJChjYXJvdXNlbCkuZmluZCgnLmNhcm91c2VsLWluZGljYXRvcnMnKSk7XG4gICAgfVxuICAgICQoJChjYXJvdXNlbCkuZmluZCgnLmNhcm91c2VsLWl0ZW0nKSkuZmlyc3QoKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgJCgkKGNhcm91c2VsKS5maW5kKCcuY2Fyb3VzZWwtaW5kaWNhdG9ycyA+IGxpJykpLmZpcnN0KCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIGlmIChpbWdzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAkKCQoY2Fyb3VzZWwpLmZpbmQoJy5jYXJvdXNlbC1pbmRpY2F0b3JzLCBhW2NsYXNzXj1cImNhcm91c2VsLWNvbnRyb2wtXCJdJykpLmRldGFjaCgpO1xuICAgIH1cbiAgICAkKGNhcm91c2VsKS5jYXJvdXNlbCgpO1xuICAgICQoJChjYXJvdXNlbCkuZmluZCgnLmNhcm91c2VsLWluZGljYXRvcnMnKSkuYXR0cignYXJpYS1oaWRkZW4nLCB0cnVlKTtcbn1cblxuLyoqXG4gKiBQYXJzZXMgSlNPTiBmcm9tIEFqYXggY2FsbCBtYWRlIHdoZW5ldmVyIGFuIGF0dHJpYnV0ZSB2YWx1ZSBpcyBbZGVdc2VsZWN0ZWRcbiAqIEBwYXJhbSB7T2JqZWN0fSByZXNwb25zZSAtIHJlc3BvbnNlIGZyb20gQWpheCBjYWxsXG4gKiBAcGFyYW0ge09iamVjdH0gcmVzcG9uc2UucHJvZHVjdCAtIFByb2R1Y3Qgb2JqZWN0XG4gKiBAcGFyYW0ge3N0cmluZ30gcmVzcG9uc2UucHJvZHVjdC5pZCAtIFByb2R1Y3QgSURcbiAqIEBwYXJhbSB7T2JqZWN0W119IHJlc3BvbnNlLnByb2R1Y3QudmFyaWF0aW9uQXR0cmlidXRlcyAtIFByb2R1Y3QgYXR0cmlidXRlc1xuICogQHBhcmFtIHtPYmplY3RbXX0gcmVzcG9uc2UucHJvZHVjdC5pbWFnZXMgLSBQcm9kdWN0IGltYWdlc1xuICogQHBhcmFtIHtib29sZWFufSByZXNwb25zZS5wcm9kdWN0Lmhhc1JlcXVpcmVkQXR0cnNTZWxlY3RlZCAtIEZsYWcgYXMgdG8gd2hldGhlciBhbGwgcmVxdWlyZWRcbiAqICAgICBhdHRyaWJ1dGVzIGhhdmUgYmVlbiBzZWxlY3RlZC4gIFVzZWQgcGFydGlhbGx5IHRvXG4gKiAgICAgZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIEFkZCB0byBDYXJ0IGJ1dHRvbiBjYW4gYmUgZW5hYmxlZFxuICogQHBhcmFtIHtqUXVlcnl9ICRwcm9kdWN0Q29udGFpbmVyIC0gRE9NIGVsZW1lbnQgZm9yIGEgZ2l2ZW4gcHJvZHVjdC5cbiAqL1xuZnVuY3Rpb24gaGFuZGxlVmFyaWFudFJlc3BvbnNlKHJlc3BvbnNlLCAkcHJvZHVjdENvbnRhaW5lcikge1xuICAgIHZhciBpc0Nob2ljZU9mQm9udXNQcm9kdWN0cyA9XG4gICAgICAgICRwcm9kdWN0Q29udGFpbmVyLnBhcmVudHMoJy5jaG9vc2UtYm9udXMtcHJvZHVjdC1kaWFsb2cnKS5sZW5ndGggPiAwO1xuICAgIHZhciBpc1ZhcmFpbnQ7XG4gICAgaWYgKHJlc3BvbnNlLnByb2R1Y3QudmFyaWF0aW9uQXR0cmlidXRlcykge1xuICAgICAgICB1cGRhdGVBdHRycyhyZXNwb25zZS5wcm9kdWN0LnZhcmlhdGlvbkF0dHJpYnV0ZXMsICRwcm9kdWN0Q29udGFpbmVyLCByZXNwb25zZS5yZXNvdXJjZXMpO1xuICAgICAgICBpc1ZhcmFpbnQgPSByZXNwb25zZS5wcm9kdWN0LnByb2R1Y3RUeXBlID09PSAndmFyaWFudCc7XG4gICAgICAgIGlmIChpc0Nob2ljZU9mQm9udXNQcm9kdWN0cyAmJiBpc1ZhcmFpbnQpIHtcbiAgICAgICAgICAgICRwcm9kdWN0Q29udGFpbmVyLnBhcmVudCgnLmJvbnVzLXByb2R1Y3QtaXRlbScpXG4gICAgICAgICAgICAgICAgLmRhdGEoJ3BpZCcsIHJlc3BvbnNlLnByb2R1Y3QuaWQpO1xuXG4gICAgICAgICAgICAkcHJvZHVjdENvbnRhaW5lci5wYXJlbnQoJy5ib251cy1wcm9kdWN0LWl0ZW0nKVxuICAgICAgICAgICAgICAgIC5kYXRhKCdyZWFkeS10by1vcmRlcicsIHJlc3BvbnNlLnByb2R1Y3QucmVhZHlUb09yZGVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBwcmltYXJ5IGltYWdlc1xuICAgIHZhciBwcmltYXJ5SW1hZ2VVcmxzID0gcmVzcG9uc2UucHJvZHVjdC5pbWFnZXMubGFyZ2U7XG4gICAgY3JlYXRlQ2Fyb3VzZWwocHJpbWFyeUltYWdlVXJscywgJHByb2R1Y3RDb250YWluZXIpO1xuXG4gICAgLy8gVXBkYXRlIHByaWNpbmdcbiAgICBpZiAoIWlzQ2hvaWNlT2ZCb251c1Byb2R1Y3RzKSB7XG4gICAgICAgIHZhciAkcHJpY2VTZWxlY3RvciA9ICQoJy5wcmljZXMgLnByaWNlJywgJHByb2R1Y3RDb250YWluZXIpLmxlbmd0aFxuICAgICAgICAgICAgPyAkKCcucHJpY2VzIC5wcmljZScsICRwcm9kdWN0Q29udGFpbmVyKVxuICAgICAgICAgICAgOiAkKCcucHJpY2VzIC5wcmljZScpO1xuICAgICAgICAkcHJpY2VTZWxlY3Rvci5yZXBsYWNlV2l0aChyZXNwb25zZS5wcm9kdWN0LnByaWNlLmh0bWwpO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBwcm9tb3Rpb25zXG4gICAgJHByb2R1Y3RDb250YWluZXIuZmluZCgnLnByb21vdGlvbnMnKS5lbXB0eSgpLmh0bWwocmVzcG9uc2UucHJvZHVjdC5wcm9tb3Rpb25zSHRtbCk7XG5cbiAgICB1cGRhdGVBdmFpbGFiaWxpdHkocmVzcG9uc2UsICRwcm9kdWN0Q29udGFpbmVyKTtcblxuICAgIGlmIChpc0Nob2ljZU9mQm9udXNQcm9kdWN0cykge1xuICAgICAgICB2YXIgJHNlbGVjdEJ1dHRvbiA9ICRwcm9kdWN0Q29udGFpbmVyLmZpbmQoJy5zZWxlY3QtYm9udXMtcHJvZHVjdCcpO1xuICAgICAgICAkc2VsZWN0QnV0dG9uLnRyaWdnZXIoJ2JvbnVzcHJvZHVjdDp1cGRhdGVTZWxlY3RCdXR0b24nLCB7XG4gICAgICAgICAgICBwcm9kdWN0OiByZXNwb25zZS5wcm9kdWN0LCAkcHJvZHVjdENvbnRhaW5lcjogJHByb2R1Y3RDb250YWluZXJcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRW5hYmxlIFwiQWRkIHRvIENhcnRcIiBidXR0b24gaWYgYWxsIHJlcXVpcmVkIGF0dHJpYnV0ZXMgaGF2ZSBiZWVuIHNlbGVjdGVkXG4gICAgICAgICQoJ2J1dHRvbi5hZGQtdG8tY2FydCwgYnV0dG9uLmFkZC10by1jYXJ0LWdsb2JhbCwgYnV0dG9uLnVwZGF0ZS1jYXJ0LXByb2R1Y3QtZ2xvYmFsJykudHJpZ2dlcigncHJvZHVjdDp1cGRhdGVBZGRUb0NhcnQnLCB7XG4gICAgICAgICAgICBwcm9kdWN0OiByZXNwb25zZS5wcm9kdWN0LCAkcHJvZHVjdENvbnRhaW5lcjogJHByb2R1Y3RDb250YWluZXJcbiAgICAgICAgfSkudHJpZ2dlcigncHJvZHVjdDpzdGF0dXNVcGRhdGUnLCByZXNwb25zZS5wcm9kdWN0KTtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgYXR0cmlidXRlc1xuICAgICRwcm9kdWN0Q29udGFpbmVyLmZpbmQoJy5tYWluLWF0dHJpYnV0ZXMnKS5lbXB0eSgpXG4gICAgICAgIC5odG1sKGdldEF0dHJpYnV0ZXNIdG1sKHJlc3BvbnNlLnByb2R1Y3QuYXR0cmlidXRlcykpO1xufVxuXG4vKipcbiAqIEB0eXBlc3BlYyBVcGRhdGVkUXVhbnRpdHlcbiAqIEB0eXBlIE9iamVjdFxuICogQHByb3BlcnR5IHtib29sZWFufSBzZWxlY3RlZCAtIFdoZXRoZXIgdGhlIHF1YW50aXR5IGhhcyBiZWVuIHNlbGVjdGVkXG4gKiBAcHJvcGVydHkge3N0cmluZ30gdmFsdWUgLSBUaGUgbnVtYmVyIG9mIHByb2R1Y3RzIHRvIHB1cmNoYXNlXG4gKiBAcHJvcGVydHkge3N0cmluZ30gdXJsIC0gQ29tcGlsZWQgVVJMIHRoYXQgc3BlY2lmaWVzIHZhcmlhdGlvbiBhdHRyaWJ1dGVzLCBwcm9kdWN0IElELCBvcHRpb25zLFxuICogICAgIGV0Yy5cbiAqL1xuXG4vKipcbiAqIFVwZGF0ZXMgdGhlIHF1YW50aXR5IERPTSBlbGVtZW50cyBwb3N0IEFqYXggY2FsbFxuICogQHBhcmFtIHtVcGRhdGVkUXVhbnRpdHlbXX0gcXVhbnRpdGllcyAtXG4gKiBAcGFyYW0ge2pRdWVyeX0gJHByb2R1Y3RDb250YWluZXIgLSBET00gY29udGFpbmVyIGZvciBhIGdpdmVuIHByb2R1Y3RcbiAqL1xuZnVuY3Rpb24gdXBkYXRlUXVhbnRpdGllcyhxdWFudGl0aWVzLCAkcHJvZHVjdENvbnRhaW5lcikge1xuICAgIGlmICghKCRwcm9kdWN0Q29udGFpbmVyLnBhcmVudCgnLmJvbnVzLXByb2R1Y3QtaXRlbScpLmxlbmd0aCA+IDApKSB7XG4gICAgICAgIHZhciBvcHRpb25zSHRtbCA9IHF1YW50aXRpZXMubWFwKGZ1bmN0aW9uIChxdWFudGl0eSkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkID0gcXVhbnRpdHkuc2VsZWN0ZWQgPyAnIHNlbGVjdGVkICcgOiAnJztcbiAgICAgICAgICAgIHJldHVybiAnPG9wdGlvbiB2YWx1ZT1cIicgKyBxdWFudGl0eS52YWx1ZSArICdcIiAgZGF0YS11cmw9XCInICsgcXVhbnRpdHkudXJsICsgJ1wiJyArXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQgKyAnPicgKyBxdWFudGl0eS52YWx1ZSArICc8L29wdGlvbj4nO1xuICAgICAgICB9KS5qb2luKCcnKTtcbiAgICAgICAgZ2V0UXVhbnRpdHlTZWxlY3RvcigkcHJvZHVjdENvbnRhaW5lcikuZW1wdHkoKS5odG1sKG9wdGlvbnNIdG1sKTtcbiAgICB9XG59XG5cbi8qKlxuICogdXBkYXRlcyB0aGUgcHJvZHVjdCB2aWV3IHdoZW4gYSBwcm9kdWN0IGF0dHJpYnV0ZSBpcyBzZWxlY3RlZCBvciBkZXNlbGVjdGVkIG9yIHdoZW5cbiAqICAgICAgICAgY2hhbmdpbmcgcXVhbnRpdHlcbiAqIEBwYXJhbSB7c3RyaW5nfSBzZWxlY3RlZFZhbHVlVXJsIC0gdGhlIFVybCBmb3IgdGhlIHNlbGVjdGVkIHZhcmlhdGlvbiB2YWx1ZVxuICogQHBhcmFtIHtqUXVlcnl9ICRwcm9kdWN0Q29udGFpbmVyIC0gRE9NIGVsZW1lbnQgZm9yIGN1cnJlbnQgcHJvZHVjdFxuICovXG5mdW5jdGlvbiBhdHRyaWJ1dGVTZWxlY3Qoc2VsZWN0ZWRWYWx1ZVVybCwgJHByb2R1Y3RDb250YWluZXIpIHtcbiAgICBpZiAoc2VsZWN0ZWRWYWx1ZVVybCkge1xuICAgICAgICAkKCdib2R5JykudHJpZ2dlcigncHJvZHVjdDpiZWZvcmVBdHRyaWJ1dGVTZWxlY3QnLFxuICAgICAgICAgICAgeyB1cmw6IHNlbGVjdGVkVmFsdWVVcmwsIGNvbnRhaW5lcjogJHByb2R1Y3RDb250YWluZXIgfSk7XG5cbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogc2VsZWN0ZWRWYWx1ZVVybCxcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGhhbmRsZVZhcmlhbnRSZXNwb25zZShkYXRhLCAkcHJvZHVjdENvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgdXBkYXRlT3B0aW9ucyhkYXRhLnByb2R1Y3Qub3B0aW9uc0h0bWwsICRwcm9kdWN0Q29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICB1cGRhdGVRdWFudGl0aWVzKGRhdGEucHJvZHVjdC5xdWFudGl0aWVzLCAkcHJvZHVjdENvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgJCgnYm9keScpLnRyaWdnZXIoJ3Byb2R1Y3Q6YWZ0ZXJBdHRyaWJ1dGVTZWxlY3QnLFxuICAgICAgICAgICAgICAgICAgICB7IGRhdGE6IGRhdGEsIGNvbnRhaW5lcjogJHByb2R1Y3RDb250YWluZXIgfSk7XG4gICAgICAgICAgICAgICAgJC5zcGlubmVyKCkuc3RvcCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJC5zcGlubmVyKCkuc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0cmlldmVzIHVybCB0byB1c2Ugd2hlbiBhZGRpbmcgYSBwcm9kdWN0IHRvIHRoZSBjYXJ0XG4gKlxuICogQHJldHVybiB7c3RyaW5nfSAtIFRoZSBwcm92aWRlZCBVUkwgdG8gdXNlIHdoZW4gYWRkaW5nIGEgcHJvZHVjdCB0byB0aGUgY2FydFxuICovXG5mdW5jdGlvbiBnZXRBZGRUb0NhcnRVcmwoKSB7XG4gICAgcmV0dXJuICQoJy5hZGQtdG8tY2FydC11cmwnKS52YWwoKTtcbn1cblxuLyoqXG4gKiBQYXJzZXMgdGhlIGh0bWwgZm9yIGEgbW9kYWwgd2luZG93XG4gKiBAcGFyYW0ge3N0cmluZ30gaHRtbCAtIHJlcHJlc2VudGluZyB0aGUgYm9keSBhbmQgZm9vdGVyIG9mIHRoZSBtb2RhbCB3aW5kb3dcbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9IC0gT2JqZWN0IHdpdGggcHJvcGVydGllcyBib2R5IGFuZCBmb290ZXIuXG4gKi9cbmZ1bmN0aW9uIHBhcnNlSHRtbChodG1sKSB7XG4gICAgdmFyICRodG1sID0gJCgnPGRpdj4nKS5hcHBlbmQoJC5wYXJzZUhUTUwoaHRtbCkpO1xuXG4gICAgdmFyIGJvZHkgPSAkaHRtbC5maW5kKCcuY2hvaWNlLW9mLWJvbnVzLXByb2R1Y3QnKTtcbiAgICB2YXIgZm9vdGVyID0gJGh0bWwuZmluZCgnLm1vZGFsLWZvb3RlcicpLmNoaWxkcmVuKCk7XG5cbiAgICByZXR1cm4geyBib2R5OiBib2R5LCBmb290ZXI6IGZvb3RlciB9O1xufVxuXG4vKipcbiAqIFJldHJpZXZlcyB1cmwgdG8gdXNlIHdoZW4gYWRkaW5nIGEgcHJvZHVjdCB0byB0aGUgY2FydFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIC0gZGF0YSBvYmplY3QgdXNlZCB0byBmaWxsIGluIGR5bmFtaWMgcG9ydGlvbnMgb2YgdGhlIGh0bWxcbiAqL1xuZnVuY3Rpb24gY2hvb3NlQm9udXNQcm9kdWN0cyhkYXRhKSB7XG4gICAgJCgnLm1vZGFsLWJvZHknKS5zcGlubmVyKCkuc3RhcnQoKTtcblxuICAgIGlmICgkKCcjY2hvb3NlQm9udXNQcm9kdWN0TW9kYWwnKS5sZW5ndGggIT09IDApIHtcbiAgICAgICAgJCgnI2Nob29zZUJvbnVzUHJvZHVjdE1vZGFsJykucmVtb3ZlKCk7XG4gICAgfVxuICAgIHZhciBib251c1VybDtcbiAgICBpZiAoZGF0YS5ib251c0Nob2ljZVJ1bGVCYXNlZCkge1xuICAgICAgICBib251c1VybCA9IGRhdGEuc2hvd1Byb2R1Y3RzVXJsUnVsZUJhc2VkO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGJvbnVzVXJsID0gZGF0YS5zaG93UHJvZHVjdHNVcmxMaXN0QmFzZWQ7XG4gICAgfVxuXG4gICAgdmFyIGh0bWxTdHJpbmcgPSAnPCEtLSBNb2RhbCAtLT4nXG4gICAgICAgICsgJzxkaXYgY2xhc3M9XCJtb2RhbCBmYWRlXCIgaWQ9XCJjaG9vc2VCb251c1Byb2R1Y3RNb2RhbFwiIHRhYmluZGV4PVwiLTFcIiByb2xlPVwiZGlhbG9nXCI+J1xuICAgICAgICArICc8c3BhbiBjbGFzcz1cImVudGVyLW1lc3NhZ2Ugc3Itb25seVwiID48L3NwYW4+J1xuICAgICAgICArICc8ZGl2IGNsYXNzPVwibW9kYWwtZGlhbG9nIGNob29zZS1ib251cy1wcm9kdWN0LWRpYWxvZ1wiICdcbiAgICAgICAgKyAnZGF0YS10b3RhbC1xdHk9XCInICsgZGF0YS5tYXhCb251c0l0ZW1zICsgJ1wiJ1xuICAgICAgICArICdkYXRhLVVVSUQ9XCInICsgZGF0YS51dWlkICsgJ1wiJ1xuICAgICAgICArICdkYXRhLXBsaVVVSUQ9XCInICsgZGF0YS5wbGlVVUlEICsgJ1wiJ1xuICAgICAgICArICdkYXRhLWFkZFRvQ2FydFVybD1cIicgKyBkYXRhLmFkZFRvQ2FydFVybCArICdcIidcbiAgICAgICAgKyAnZGF0YS1wYWdlU3RhcnQ9XCIwXCInXG4gICAgICAgICsgJ2RhdGEtcGFnZVNpemU9XCInICsgZGF0YS5wYWdlU2l6ZSArICdcIidcbiAgICAgICAgKyAnZGF0YS1tb3JlVVJMPVwiJyArIGRhdGEuc2hvd1Byb2R1Y3RzVXJsUnVsZUJhc2VkICsgJ1wiJ1xuICAgICAgICArICdkYXRhLWJvbnVzQ2hvaWNlUnVsZUJhc2VkPVwiJyArIGRhdGEuYm9udXNDaG9pY2VSdWxlQmFzZWQgKyAnXCI+J1xuICAgICAgICArICc8IS0tIE1vZGFsIGNvbnRlbnQtLT4nXG4gICAgICAgICsgJzxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+J1xuICAgICAgICArICc8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+J1xuICAgICAgICArICcgICAgPHNwYW4gY2xhc3M9XCJcIj4nICsgZGF0YS5sYWJlbHMuc2VsZWN0cHJvZHMgKyAnPC9zcGFuPidcbiAgICAgICAgKyAnICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2UgcHVsbC1yaWdodFwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCI+J1xuICAgICAgICArICcgICAgICAgIDxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPiZ0aW1lczs8L3NwYW4+J1xuICAgICAgICArICcgICAgICAgIDxzcGFuIGNsYXNzPVwic3Itb25seVwiPiA8L3NwYW4+J1xuICAgICAgICArICcgICAgPC9idXR0b24+J1xuICAgICAgICArICc8L2Rpdj4nXG4gICAgICAgICsgJzxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+PC9kaXY+J1xuICAgICAgICArICc8ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+PC9kaXY+J1xuICAgICAgICArICc8L2Rpdj4nXG4gICAgICAgICsgJzwvZGl2PidcbiAgICAgICAgKyAnPC9kaXY+JztcbiAgICAkKCdib2R5JykuYXBwZW5kKGh0bWxTdHJpbmcpO1xuICAgICQoJy5tb2RhbC1ib2R5Jykuc3Bpbm5lcigpLnN0YXJ0KCk7XG5cbiAgICAkLmFqYXgoe1xuICAgICAgICB1cmw6IGJvbnVzVXJsLFxuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHZhciBwYXJzZWRIdG1sID0gcGFyc2VIdG1sKHJlc3BvbnNlLnJlbmRlcmVkVGVtcGxhdGUpO1xuICAgICAgICAgICAgJCgnI2Nob29zZUJvbnVzUHJvZHVjdE1vZGFsIC5tb2RhbC1ib2R5JykuZW1wdHkoKTtcbiAgICAgICAgICAgICQoJyNjaG9vc2VCb251c1Byb2R1Y3RNb2RhbCAuZW50ZXItbWVzc2FnZScpLnRleHQocmVzcG9uc2UuZW50ZXJEaWFsb2dNZXNzYWdlKTtcbiAgICAgICAgICAgICQoJyNjaG9vc2VCb251c1Byb2R1Y3RNb2RhbCAubW9kYWwtaGVhZGVyIC5jbG9zZSAuc3Itb25seScpLnRleHQocmVzcG9uc2UuY2xvc2VCdXR0b25UZXh0KTtcbiAgICAgICAgICAgICQoJyNjaG9vc2VCb251c1Byb2R1Y3RNb2RhbCAubW9kYWwtYm9keScpLmh0bWwocGFyc2VkSHRtbC5ib2R5KTtcbiAgICAgICAgICAgICQoJyNjaG9vc2VCb251c1Byb2R1Y3RNb2RhbCAubW9kYWwtZm9vdGVyJykuaHRtbChwYXJzZWRIdG1sLmZvb3Rlcik7XG4gICAgICAgICAgICAkKCcjY2hvb3NlQm9udXNQcm9kdWN0TW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuICAgICAgICAgICAgJC5zcGlubmVyKCkuc3RvcCgpO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJC5zcGlubmVyKCkuc3RvcCgpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbi8qKlxuICogVXBkYXRlcyB0aGUgTWluaS1DYXJ0IHF1YW50aXR5IHZhbHVlIGFmdGVyIHRoZSBjdXN0b21lciBoYXMgcHJlc3NlZCB0aGUgXCJBZGQgdG8gQ2FydFwiIGJ1dHRvblxuICogQHBhcmFtIHtzdHJpbmd9IHJlc3BvbnNlIC0gYWpheCByZXNwb25zZSBmcm9tIGNsaWNraW5nIHRoZSBhZGQgdG8gY2FydCBidXR0b25cbiAqL1xuZnVuY3Rpb24gaGFuZGxlUG9zdENhcnRBZGQocmVzcG9uc2UpIHtcbiAgICAkKCcubWluaWNhcnQnKS50cmlnZ2VyKCdjb3VudDp1cGRhdGUnLCByZXNwb25zZSk7XG4gICAgdmFyIG1lc3NhZ2VUeXBlID0gcmVzcG9uc2UuZXJyb3IgPyAnYWxlcnQtZGFuZ2VyJyA6ICdhbGVydC1zdWNjZXNzJztcbiAgICAvLyBzaG93IGFkZCB0byBjYXJ0IHRvYXN0XG4gICAgaWYgKHJlc3BvbnNlLm5ld0JvbnVzRGlzY291bnRMaW5lSXRlbVxuICAgICAgICAmJiBPYmplY3Qua2V5cyhyZXNwb25zZS5uZXdCb251c0Rpc2NvdW50TGluZUl0ZW0pLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICBjaG9vc2VCb251c1Byb2R1Y3RzKHJlc3BvbnNlLm5ld0JvbnVzRGlzY291bnRMaW5lSXRlbSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCQoJy5hZGQtdG8tY2FydC1tZXNzYWdlcycpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZChcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImFkZC10by1jYXJ0LW1lc3NhZ2VzXCI+PC9kaXY+J1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgICQoJy5hZGQtdG8tY2FydC1tZXNzYWdlcycpLmFwcGVuZChcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYWxlcnQgJyArIG1lc3NhZ2VUeXBlICsgJyBhZGQtdG8tYmFza2V0LWFsZXJ0IHRleHQtY2VudGVyXCIgcm9sZT1cImFsZXJ0XCI+J1xuICAgICAgICAgICAgKyByZXNwb25zZS5tZXNzYWdlXG4gICAgICAgICAgICArICc8L2Rpdj4nXG4gICAgICAgICk7XG5cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKCcuYWRkLXRvLWJhc2tldC1hbGVydCcpLnJlbW92ZSgpO1xuICAgICAgICB9LCA1MDAwKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0cmlldmVzIHRoZSBidW5kbGUgcHJvZHVjdCBpdGVtIElEJ3MgZm9yIHRoZSBDb250cm9sbGVyIHRvIHJlcGxhY2UgYnVuZGxlIG1hc3RlciBwcm9kdWN0XG4gKiBpdGVtcyB3aXRoIHRoZWlyIHNlbGVjdGVkIHZhcmlhbnRzXG4gKlxuICogQHJldHVybiB7c3RyaW5nW119IC0gTGlzdCBvZiBzZWxlY3RlZCBidW5kbGUgcHJvZHVjdCBpdGVtIElEJ3NcbiAqL1xuZnVuY3Rpb24gZ2V0Q2hpbGRQcm9kdWN0cygpIHtcbiAgICB2YXIgY2hpbGRQcm9kdWN0cyA9IFtdO1xuICAgICQoJy5idW5kbGUtaXRlbScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICBjaGlsZFByb2R1Y3RzLnB1c2goe1xuICAgICAgICAgICAgcGlkOiAkKHRoaXMpLmZpbmQoJy5wcm9kdWN0LWlkJykudGV4dCgpLFxuICAgICAgICAgICAgcXVhbnRpdHk6IHBhcnNlSW50KCQodGhpcykuZmluZCgnbGFiZWwucXVhbnRpdHknKS5kYXRhKCdxdWFudGl0eScpLCAxMClcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gY2hpbGRQcm9kdWN0cy5sZW5ndGggPyBKU09OLnN0cmluZ2lmeShjaGlsZFByb2R1Y3RzKSA6IFtdO1xufVxuXG4vKipcbiAqIFJldHJpZXZlIHByb2R1Y3Qgb3B0aW9uc1xuICpcbiAqIEBwYXJhbSB7alF1ZXJ5fSAkcHJvZHVjdENvbnRhaW5lciAtIERPTSBlbGVtZW50IGZvciBjdXJyZW50IHByb2R1Y3RcbiAqIEByZXR1cm4ge3N0cmluZ30gLSBQcm9kdWN0IG9wdGlvbnMgYW5kIHRoZWlyIHNlbGVjdGVkIHZhbHVlc1xuICovXG5mdW5jdGlvbiBnZXRPcHRpb25zKCRwcm9kdWN0Q29udGFpbmVyKSB7XG4gICAgdmFyIG9wdGlvbnMgPSAkcHJvZHVjdENvbnRhaW5lclxuICAgICAgICAuZmluZCgnLnByb2R1Y3Qtb3B0aW9uJylcbiAgICAgICAgLm1hcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgJGVsT3B0aW9uID0gJCh0aGlzKS5maW5kKCcub3B0aW9ucy1zZWxlY3QnKTtcbiAgICAgICAgICAgIHZhciB1cmxWYWx1ZSA9ICRlbE9wdGlvbi52YWwoKTtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZFZhbHVlSWQgPSAkZWxPcHRpb24uZmluZCgnb3B0aW9uW3ZhbHVlPVwiJyArIHVybFZhbHVlICsgJ1wiXScpXG4gICAgICAgICAgICAgICAgLmRhdGEoJ3ZhbHVlLWlkJyk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG9wdGlvbklkOiAkKHRoaXMpLmRhdGEoJ29wdGlvbi1pZCcpLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkVmFsdWVJZDogc2VsZWN0ZWRWYWx1ZUlkXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KS50b0FycmF5KCk7XG5cbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob3B0aW9ucyk7XG59XG5cbi8qKlxuICogTWFrZXMgYSBjYWxsIHRvIHRoZSBzZXJ2ZXIgdG8gcmVwb3J0IHRoZSBldmVudCBvZiBhZGRpbmcgYW4gaXRlbSB0byB0aGUgY2FydFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nIHwgYm9vbGVhbn0gdXJsIC0gYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBlbmQgcG9pbnQgdG8gaGl0IHNvIHRoYXQgdGhlIGV2ZW50IGNhbiBiZSByZWNvcmRlZCwgb3IgZmFsc2VcbiAqL1xuZnVuY3Rpb24gbWluaUNhcnRSZXBvcnRpbmdVcmwodXJsKSB7XG4gICAgaWYgKHVybCkge1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vIHJlcG9ydGluZyB1cmxzIGhpdCBvbiB0aGUgc2VydmVyXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAvLyBubyByZXBvcnRpbmcgdXJscyBoaXQgb24gdGhlIHNlcnZlclxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIGF0dHJpYnV0ZVNlbGVjdDogYXR0cmlidXRlU2VsZWN0LFxuICAgIG1ldGhvZHM6IHtcbiAgICAgICAgZWRpdEJvbnVzUHJvZHVjdHM6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBjaG9vc2VCb251c1Byb2R1Y3RzKGRhdGEpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGZvY3VzQ2hvb3NlQm9udXNQcm9kdWN0TW9kYWw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnYm9keScpLm9uKCdzaG93bi5icy5tb2RhbCcsICcjY2hvb3NlQm9udXNQcm9kdWN0TW9kYWwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKCcjY2hvb3NlQm9udXNQcm9kdWN0TW9kYWwnKS5zaWJsaW5ncygpLmF0dHIoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcbiAgICAgICAgICAgICQoJyNjaG9vc2VCb251c1Byb2R1Y3RNb2RhbCAuY2xvc2UnKS5mb2N1cygpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgb25DbG9zaW5nQ2hvb3NlQm9udXNQcm9kdWN0TW9kYWw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnYm9keScpLm9uKCdoaWRkZW4uYnMubW9kYWwnLCAnI2Nob29zZUJvbnVzUHJvZHVjdE1vZGFsJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCgnI2Nob29zZUJvbnVzUHJvZHVjdE1vZGFsJykuc2libGluZ3MoKS5hdHRyKCdhcmlhLWhpZGRlbicsICdmYWxzZScpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgdHJhcENob29zZUJvbnVzUHJvZHVjdE1vZGFsRm9jdXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnYm9keScpLm9uKCdrZXlkb3duJywgJyNjaG9vc2VCb251c1Byb2R1Y3RNb2RhbCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZm9jdXNQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6IGUsXG4gICAgICAgICAgICAgICAgY29udGFpbmVyU2VsZWN0b3I6ICcjY2hvb3NlQm9udXNQcm9kdWN0TW9kYWwnLFxuICAgICAgICAgICAgICAgIGZpcnN0RWxlbWVudFNlbGVjdG9yOiAnLmNsb3NlJyxcbiAgICAgICAgICAgICAgICBsYXN0RWxlbWVudFNlbGVjdG9yOiAnLmFkZC1ib251cy1wcm9kdWN0cydcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBmb2N1c0hlbHBlci5zZXRUYWJOZXh0Rm9jdXMoZm9jdXNQYXJhbXMpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgY29sb3JBdHRyaWJ1dGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1tkYXRhLWF0dHI9XCJjb2xvclwiXSBidXR0b24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKCdkaXNhYmxlZCcpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyICRwcm9kdWN0Q29udGFpbmVyID0gJCh0aGlzKS5jbG9zZXN0KCcuc2V0LWl0ZW0nKTtcbiAgICAgICAgICAgIGlmICghJHByb2R1Y3RDb250YWluZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgJHByb2R1Y3RDb250YWluZXIgPSAkKHRoaXMpLmNsb3Nlc3QoJy5wcm9kdWN0LWRldGFpbCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhdHRyaWJ1dGVTZWxlY3QoJCh0aGlzKS5hdHRyKCdkYXRhLXVybCcpLCAkcHJvZHVjdENvbnRhaW5lcik7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBzZWxlY3RBdHRyaWJ1dGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NoYW5nZScsICdzZWxlY3RbY2xhc3MqPVwic2VsZWN0LVwiXSwgLm9wdGlvbnMtc2VsZWN0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgdmFyICRwcm9kdWN0Q29udGFpbmVyID0gJCh0aGlzKS5jbG9zZXN0KCcuc2V0LWl0ZW0nKTtcbiAgICAgICAgICAgIGlmICghJHByb2R1Y3RDb250YWluZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgJHByb2R1Y3RDb250YWluZXIgPSAkKHRoaXMpLmNsb3Nlc3QoJy5wcm9kdWN0LWRldGFpbCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXR0cmlidXRlU2VsZWN0KGUuY3VycmVudFRhcmdldC52YWx1ZSwgJHByb2R1Y3RDb250YWluZXIpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgYXZhaWxhYmlsaXR5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjaGFuZ2UnLCAnLnF1YW50aXR5LXNlbGVjdCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHZhciAkcHJvZHVjdENvbnRhaW5lciA9ICQodGhpcykuY2xvc2VzdCgnLnByb2R1Y3QtZGV0YWlsJyk7XG4gICAgICAgICAgICBpZiAoISRwcm9kdWN0Q29udGFpbmVyLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICRwcm9kdWN0Q29udGFpbmVyID0gJCh0aGlzKS5jbG9zZXN0KCcubW9kYWwtY29udGVudCcpLmZpbmQoJy5wcm9kdWN0LXF1aWNrdmlldycpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoJCgnLmJ1bmRsZS1pdGVtcycsICRwcm9kdWN0Q29udGFpbmVyKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVTZWxlY3QoJChlLmN1cnJlbnRUYXJnZXQpLmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpLmRhdGEoJ3VybCcpLFxuICAgICAgICAgICAgICAgICAgICAkcHJvZHVjdENvbnRhaW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBhZGRUb0NhcnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJ2J1dHRvbi5hZGQtdG8tY2FydCwgYnV0dG9uLmFkZC10by1jYXJ0LWdsb2JhbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhZGRUb0NhcnRVcmw7XG4gICAgICAgICAgICB2YXIgcGlkO1xuICAgICAgICAgICAgdmFyIHBpZHNPYmo7XG4gICAgICAgICAgICB2YXIgc2V0UGlkcztcblxuICAgICAgICAgICAgJCgnYm9keScpLnRyaWdnZXIoJ3Byb2R1Y3Q6YmVmb3JlQWRkVG9DYXJ0JywgdGhpcyk7XG5cbiAgICAgICAgICAgIGlmICgkKCcuc2V0LWl0ZW1zJykubGVuZ3RoICYmICQodGhpcykuaGFzQ2xhc3MoJ2FkZC10by1jYXJ0LWdsb2JhbCcpKSB7XG4gICAgICAgICAgICAgICAgc2V0UGlkcyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgJCgnLnByb2R1Y3QtZGV0YWlsJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghJCh0aGlzKS5oYXNDbGFzcygncHJvZHVjdC1zZXQtZGV0YWlsJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFBpZHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGlkOiAkKHRoaXMpLmZpbmQoJy5wcm9kdWN0LWlkJykudGV4dCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF0eTogJCh0aGlzKS5maW5kKCcucXVhbnRpdHktc2VsZWN0JykudmFsKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogZ2V0T3B0aW9ucygkKHRoaXMpKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBwaWRzT2JqID0gSlNPTi5zdHJpbmdpZnkoc2V0UGlkcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHBpZCA9IGdldFBpZFZhbHVlKCQodGhpcykpO1xuXG4gICAgICAgICAgICB2YXIgJHByb2R1Y3RDb250YWluZXIgPSAkKHRoaXMpLmNsb3Nlc3QoJy5wcm9kdWN0LWRldGFpbCcpO1xuICAgICAgICAgICAgaWYgKCEkcHJvZHVjdENvbnRhaW5lci5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAkcHJvZHVjdENvbnRhaW5lciA9ICQodGhpcykuY2xvc2VzdCgnLnF1aWNrLXZpZXctZGlhbG9nJykuZmluZCgnLnByb2R1Y3QtZGV0YWlsJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGFkZFRvQ2FydFVybCA9IGdldEFkZFRvQ2FydFVybCgpO1xuXG4gICAgICAgICAgICB2YXIgZm9ybSA9IHtcbiAgICAgICAgICAgICAgICBwaWQ6IHBpZCxcbiAgICAgICAgICAgICAgICBwaWRzT2JqOiBwaWRzT2JqLFxuICAgICAgICAgICAgICAgIGNoaWxkUHJvZHVjdHM6IGdldENoaWxkUHJvZHVjdHMoKSxcbiAgICAgICAgICAgICAgICBxdWFudGl0eTogZ2V0UXVhbnRpdHlTZWxlY3RlZCgkKHRoaXMpKVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKCEkKCcuYnVuZGxlLWl0ZW0nKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBmb3JtLm9wdGlvbnMgPSBnZXRPcHRpb25zKCRwcm9kdWN0Q29udGFpbmVyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJCh0aGlzKS50cmlnZ2VyKCd1cGRhdGVBZGRUb0NhcnRGb3JtRGF0YScsIGZvcm0pO1xuICAgICAgICAgICAgaWYgKGFkZFRvQ2FydFVybCkge1xuICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogYWRkVG9DYXJ0VXJsLFxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZm9ybSxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZVBvc3RDYXJ0QWRkKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLnRyaWdnZXIoJ3Byb2R1Y3Q6YWZ0ZXJBZGRUb0NhcnQnLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQuc3Bpbm5lcigpLnN0b3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmlDYXJ0UmVwb3J0aW5nVXJsKGRhdGEucmVwb3J0aW5nVVJMKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQuc3Bpbm5lcigpLnN0b3AoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIHNlbGVjdEJvbnVzUHJvZHVjdDogZnVuY3Rpb24gKCkge1xuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnNlbGVjdC1ib251cy1wcm9kdWN0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyICRjaG9pY2VPZkJvbnVzUHJvZHVjdCA9ICQodGhpcykucGFyZW50cygnLmNob2ljZS1vZi1ib251cy1wcm9kdWN0Jyk7XG4gICAgICAgICAgICB2YXIgcGlkID0gJCh0aGlzKS5kYXRhKCdwaWQnKTtcbiAgICAgICAgICAgIHZhciBtYXhQaWRzID0gJCgnLmNob29zZS1ib251cy1wcm9kdWN0LWRpYWxvZycpLmRhdGEoJ3RvdGFsLXF0eScpO1xuICAgICAgICAgICAgdmFyIHN1Ym1pdHRlZFF0eSA9IHBhcnNlSW50KCRjaG9pY2VPZkJvbnVzUHJvZHVjdC5maW5kKCcuYm9udXMtcXVhbnRpdHktc2VsZWN0JykudmFsKCksIDEwKTtcbiAgICAgICAgICAgIHZhciB0b3RhbFF0eSA9IDA7XG4gICAgICAgICAgICAkLmVhY2goJCgnI2Nob29zZUJvbnVzUHJvZHVjdE1vZGFsIC5zZWxlY3RlZC1ib251cy1wcm9kdWN0cyAuc2VsZWN0ZWQtcGlkJyksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0b3RhbFF0eSArPSAkKHRoaXMpLmRhdGEoJ3F0eScpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0b3RhbFF0eSArPSBzdWJtaXR0ZWRRdHk7XG4gICAgICAgICAgICB2YXIgb3B0aW9uSUQgPSAkY2hvaWNlT2ZCb251c1Byb2R1Y3QuZmluZCgnLnByb2R1Y3Qtb3B0aW9uJykuZGF0YSgnb3B0aW9uLWlkJyk7XG4gICAgICAgICAgICB2YXIgdmFsdWVJZCA9ICRjaG9pY2VPZkJvbnVzUHJvZHVjdC5maW5kKCcub3B0aW9ucy1zZWxlY3Qgb3B0aW9uOnNlbGVjdGVkJykuZGF0YSgndmFsdWVJZCcpO1xuICAgICAgICAgICAgaWYgKHRvdGFsUXR5IDw9IG1heFBpZHMpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRCb251c1Byb2R1Y3RIdG1sID0gJydcbiAgICAgICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwic2VsZWN0ZWQtcGlkIHJvd1wiICdcbiAgICAgICAgICAgICAgICArICdkYXRhLXBpZD1cIicgKyBwaWQgKyAnXCInXG4gICAgICAgICAgICAgICAgKyAnZGF0YS1xdHk9XCInICsgc3VibWl0dGVkUXR5ICsgJ1wiJ1xuICAgICAgICAgICAgICAgICsgJ2RhdGEtb3B0aW9uSUQ9XCInICsgKG9wdGlvbklEIHx8ICcnKSArICdcIidcbiAgICAgICAgICAgICAgICArICdkYXRhLW9wdGlvbi1zZWxlY3RlZC12YWx1ZT1cIicgKyAodmFsdWVJZCB8fCAnJykgKyAnXCInXG4gICAgICAgICAgICAgICAgKyAnPidcbiAgICAgICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwiY29sLXNtLTExIGNvbC05IGJvbnVzLXByb2R1Y3QtbmFtZVwiID4nXG4gICAgICAgICAgICAgICAgKyAkY2hvaWNlT2ZCb251c1Byb2R1Y3QuZmluZCgnLnByb2R1Y3QtbmFtZScpLmh0bWwoKVxuICAgICAgICAgICAgICAgICsgJzwvZGl2PidcbiAgICAgICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwiY29sLTFcIj48aSBjbGFzcz1cImZhIGZhLXRpbWVzXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPjwvZGl2PidcbiAgICAgICAgICAgICAgICArICc8L2Rpdj4nXG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICQoJyNjaG9vc2VCb251c1Byb2R1Y3RNb2RhbCAuc2VsZWN0ZWQtYm9udXMtcHJvZHVjdHMnKS5hcHBlbmQoc2VsZWN0ZWRCb251c1Byb2R1Y3RIdG1sKTtcbiAgICAgICAgICAgICAgICAkKCcucHJlLWNhcnQtcHJvZHVjdHMnKS5odG1sKHRvdGFsUXR5KTtcbiAgICAgICAgICAgICAgICAkKCcuc2VsZWN0ZWQtYm9udXMtcHJvZHVjdHMgLmJvbnVzLXN1bW1hcnknKS5yZW1vdmVDbGFzcygnYWxlcnQtZGFuZ2VyJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJy5zZWxlY3RlZC1ib251cy1wcm9kdWN0cyAuYm9udXMtc3VtbWFyeScpLmFkZENsYXNzKCdhbGVydC1kYW5nZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICByZW1vdmVCb251c1Byb2R1Y3Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5zZWxlY3RlZC1waWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgICAgICAgdmFyICRzZWxlY3RlZCA9ICQoJyNjaG9vc2VCb251c1Byb2R1Y3RNb2RhbCAuc2VsZWN0ZWQtYm9udXMtcHJvZHVjdHMgLnNlbGVjdGVkLXBpZCcpO1xuICAgICAgICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAgICAgICAgIGlmICgkc2VsZWN0ZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgJHNlbGVjdGVkLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBjb3VudCArPSBwYXJzZUludCgkKHRoaXMpLmRhdGEoJ3F0eScpLCAxMCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICQoJy5wcmUtY2FydC1wcm9kdWN0cycpLmh0bWwoY291bnQpO1xuICAgICAgICAgICAgJCgnLnNlbGVjdGVkLWJvbnVzLXByb2R1Y3RzIC5ib251cy1zdW1tYXJ5JykucmVtb3ZlQ2xhc3MoJ2FsZXJ0LWRhbmdlcicpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGVuYWJsZUJvbnVzUHJvZHVjdFNlbGVjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCdib2R5Jykub24oJ2JvbnVzcHJvZHVjdDp1cGRhdGVTZWxlY3RCdXR0b24nLCBmdW5jdGlvbiAoZSwgcmVzcG9uc2UpIHtcbiAgICAgICAgICAgICQoJ2J1dHRvbi5zZWxlY3QtYm9udXMtcHJvZHVjdCcsIHJlc3BvbnNlLiRwcm9kdWN0Q29udGFpbmVyKS5hdHRyKCdkaXNhYmxlZCcsXG4gICAgICAgICAgICAgICAgKCFyZXNwb25zZS5wcm9kdWN0LnJlYWR5VG9PcmRlciB8fCAhcmVzcG9uc2UucHJvZHVjdC5hdmFpbGFibGUpKTtcbiAgICAgICAgICAgIHZhciBwaWQgPSByZXNwb25zZS5wcm9kdWN0LmlkO1xuICAgICAgICAgICAgJCgnYnV0dG9uLnNlbGVjdC1ib251cy1wcm9kdWN0JywgcmVzcG9uc2UuJHByb2R1Y3RDb250YWluZXIpLmRhdGEoJ3BpZCcsIHBpZCk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgc2hvd01vcmVCb251c1Byb2R1Y3RzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuc2hvdy1tb3JlLWJvbnVzLXByb2R1Y3RzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHVybCA9ICQodGhpcykuZGF0YSgndXJsJyk7XG4gICAgICAgICAgICAkKCcubW9kYWwtY29udGVudCcpLnNwaW5uZXIoKS5zdGFydCgpO1xuICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChodG1sKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJzZWRIdG1sID0gcGFyc2VIdG1sKGh0bWwpO1xuICAgICAgICAgICAgICAgICAgICAkKCcubW9kYWwtYm9keScpLmFwcGVuZChwYXJzZWRIdG1sLmJvZHkpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuc2hvdy1tb3JlLWJvbnVzLXByb2R1Y3RzOmZpcnN0JykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5tb2RhbC1jb250ZW50Jykuc3Bpbm5lcigpLnN0b3AoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5tb2RhbC1jb250ZW50Jykuc3Bpbm5lcigpLnN0b3AoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBhZGRCb251c1Byb2R1Y3RzVG9DYXJ0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuYWRkLWJvbnVzLXByb2R1Y3RzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyICRyZWFkeVRvT3JkZXJCb251c1Byb2R1Y3RzID0gJCgnLmNob29zZS1ib251cy1wcm9kdWN0LWRpYWxvZyAuc2VsZWN0ZWQtcGlkJyk7XG4gICAgICAgICAgICB2YXIgcXVlcnlTdHJpbmcgPSAnP3BpZHM9JztcbiAgICAgICAgICAgIHZhciB1cmwgPSAkKCcuY2hvb3NlLWJvbnVzLXByb2R1Y3QtZGlhbG9nJykuZGF0YSgnYWRkdG9jYXJ0dXJsJyk7XG4gICAgICAgICAgICB2YXIgcGlkc09iamVjdCA9IHtcbiAgICAgICAgICAgICAgICBib251c1Byb2R1Y3RzOiBbXVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgJC5lYWNoKCRyZWFkeVRvT3JkZXJCb251c1Byb2R1Y3RzLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHF0eU9wdGlvbiA9XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KCQodGhpcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKCdxdHknKSwgMTApO1xuXG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKHF0eU9wdGlvbiA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuZGF0YSgnb3B0aW9uaWQnKSAmJiAkKHRoaXMpLmRhdGEoJ29wdGlvbi1zZWxlY3RlZC12YWx1ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbi5vcHRpb25JZCA9ICQodGhpcykuZGF0YSgnb3B0aW9uaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbi5wcm9kdWN0SWQgPSAkKHRoaXMpLmRhdGEoJ3BpZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnNlbGVjdGVkVmFsdWVJZCA9ICQodGhpcykuZGF0YSgnb3B0aW9uLXNlbGVjdGVkLXZhbHVlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcGlkc09iamVjdC5ib251c1Byb2R1Y3RzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgcGlkOiAkKHRoaXMpLmRhdGEoJ3BpZCcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcXR5OiBxdHlPcHRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBbb3B0aW9uXVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcGlkc09iamVjdC50b3RhbFF0eSA9IHBhcnNlSW50KCQoJy5wcmUtY2FydC1wcm9kdWN0cycpLmh0bWwoKSwgMTApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcXVlcnlTdHJpbmcgKz0gSlNPTi5zdHJpbmdpZnkocGlkc09iamVjdCk7XG4gICAgICAgICAgICBxdWVyeVN0cmluZyA9IHF1ZXJ5U3RyaW5nICsgJyZ1dWlkPScgKyAkKCcuY2hvb3NlLWJvbnVzLXByb2R1Y3QtZGlhbG9nJykuZGF0YSgndXVpZCcpO1xuICAgICAgICAgICAgcXVlcnlTdHJpbmcgPSBxdWVyeVN0cmluZyArICcmcGxpdXVpZD0nICsgJCgnLmNob29zZS1ib251cy1wcm9kdWN0LWRpYWxvZycpLmRhdGEoJ3BsaXV1aWQnKTtcbiAgICAgICAgICAgICQuc3Bpbm5lcigpLnN0YXJ0KCk7XG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHVybDogdXJsICsgcXVlcnlTdHJpbmcsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgJC5zcGlubmVyKCkuc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2Nob29zZUJvbnVzUHJvZHVjdE1vZGFsJykubW9kYWwoJ2hpZGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKCcuYWRkLXRvLWNhcnQtbWVzc2FnZXMnKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiYWRkLXRvLWNhcnQtbWVzc2FnZXNcIj48L2Rpdj4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5hZGQtdG8tY2FydC1tZXNzYWdlcycpLmFwcGVuZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWRhbmdlciBhZGQtdG8tYmFza2V0LWFsZXJ0IHRleHQtY2VudGVyXCInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAnIHJvbGU9XCJhbGVydFwiPidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGRhdGEuZXJyb3JNZXNzYWdlICsgJzwvZGl2PidcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuYWRkLXRvLWJhc2tldC1hbGVydCcpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwMCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuY29uZmlndXJlLWJvbnVzLXByb2R1Y3QtYXR0cmlidXRlcycpLmh0bWwoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuYm9udXMtcHJvZHVjdHMtc3RlcDInKS5yZW1vdmVDbGFzcygnaGlkZGVuLXhsLWRvd24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNjaG9vc2VCb251c1Byb2R1Y3RNb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKCcuYWRkLXRvLWNhcnQtbWVzc2FnZXMnKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiYWRkLXRvLWNhcnQtbWVzc2FnZXNcIj48L2Rpdj4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5taW5pY2FydC1xdWFudGl0eScpLmh0bWwoZGF0YS50b3RhbFF0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuYWRkLXRvLWNhcnQtbWVzc2FnZXMnKS5hcHBlbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1zdWNjZXNzIGFkZC10by1iYXNrZXQtYWxlcnQgdGV4dC1jZW50ZXJcIidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArICcgcm9sZT1cImFsZXJ0XCI+J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgZGF0YS5tc2dTdWNjZXNzICsgJzwvZGl2PidcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuYWRkLXRvLWJhc2tldC1hbGVydCcpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKCcuY2FydC1wYWdlJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDE1MDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkLnNwaW5uZXIoKS5zdG9wKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBnZXRQaWRWYWx1ZTogZ2V0UGlkVmFsdWUsXG4gICAgZ2V0UXVhbnRpdHlTZWxlY3RlZDogZ2V0UXVhbnRpdHlTZWxlY3RlZCxcbiAgICBtaW5pQ2FydFJlcG9ydGluZ1VybDogbWluaUNhcnRSZXBvcnRpbmdVcmxcbn07XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./cartridges/app_storefront_base/cartridge/client/default/js/product/base.js\n");

/***/ }),

/***/ "./cartridges/app_storefront_base/cartridge/client/default/js/util.js":
/*!****************************************************************************!*\
  !*** ./cartridges/app_storefront_base/cartridge/client/default/js/util.js ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nmodule.exports = function (include) {\n    if (typeof include === 'function') {\n        include();\n    } else if (typeof include === 'object') {\n        Object.keys(include).forEach(function (key) {\n            if (typeof include[key] === 'function') {\n                include[key]();\n            }\n        });\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jYXJ0cmlkZ2VzL2FwcF9zdG9yZWZyb250X2Jhc2UvY2FydHJpZGdlL2NsaWVudC9kZWZhdWx0L2pzL3V0aWwuanM/MWU1ZCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSIsImZpbGUiOiIuL2NhcnRyaWRnZXMvYXBwX3N0b3JlZnJvbnRfYmFzZS9jYXJ0cmlkZ2UvY2xpZW50L2RlZmF1bHQvanMvdXRpbC5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaW5jbHVkZSkge1xuICAgIGlmICh0eXBlb2YgaW5jbHVkZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBpbmNsdWRlKCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgaW5jbHVkZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgT2JqZWN0LmtleXMoaW5jbHVkZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGluY2x1ZGVba2V5XSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGluY2x1ZGVba2V5XSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./cartridges/app_storefront_base/cartridge/client/default/js/util.js\n");

/***/ })

/******/ });